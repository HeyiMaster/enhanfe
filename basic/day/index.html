<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no"
    />
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="https://walker-markdown.oss-cn-shenzhen.aliyuncs.com/uPic/enhanfe.png"
    />
    <link rel="stylesheet" href="/enhanfe/umi.css" />
    <script>
      window.routerBase = "/";
    </script>
    <script>
      //! umi version: 3.5.2
    </script>
    <script>
      !(function () {
        var e = localStorage.getItem("dumi:prefers-color"),
          t = window.matchMedia("(prefers-color-scheme: dark)").matches,
          r = ["light", "dark", "auto"];
        document.documentElement.setAttribute(
          "data-prefers-color",
          e === r[2] ? (t ? r[1] : r[0]) : r.includes(e) ? e : r[0]
        );
      })();
    </script>
    <title>åŸºç¡€çŸ¥è¯†</title>
  </head>
  <body>
    <div id="root"><div class="__dumi-default-layout" data-route="/basic/day" data-show-sidemenu="true" data-show-slugs="true" data-site-mode="true" data-gapless="false"><div class="__dumi-default-navbar" data-mode="site"><button class="__dumi-default-navbar-toggle"></button><a class="__dumi-default-navbar-logo" style="background-image:url(&#x27;https://walker-markdown.oss-cn-shenzhen.aliyuncs.com/uPic/enhanfe.png&#x27;)" href="/">Enhanfe</a><nav><div class="__dumi-default-search"><input type="search" class="__dumi-default-search-input" value=""/><ul></ul></div><span><a aria-current="page" class="active" href="/basic">ğŸ’Š åŸºç¡€</a></span><span><a href="/advanced">ğŸ”¥ è¿›é˜¶</a></span><span><a href="/algorithms">ğŸ¦ æ•°æ®ç»“æ„ä¸ç®—æ³•</a></span><span><a target="_blank" rel="noopener noreferrer" href="https://github.com/HeyiMaster/enhanfe">â­ï¸Â Â GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></span><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "></div></div></nav></div><div class="__dumi-default-menu" data-mode="site"><div class="__dumi-default-menu-inner"><div class="__dumi-default-menu-header"><a class="__dumi-default-menu-logo" style="background-image:url(&#x27;https://walker-markdown.oss-cn-shenzhen.aliyuncs.com/uPic/enhanfe.png&#x27;)" href="/"></a><h1>Enhanfe</h1><p></p></div><div class="__dumi-default-menu-mobile-area"><ul class="__dumi-default-menu-nav-list"><li><a aria-current="page" class="active" href="/basic">ğŸ’Š åŸºç¡€</a></li><li><a href="/advanced">ğŸ”¥ è¿›é˜¶</a></li><li><a href="/algorithms">ğŸ¦ æ•°æ®ç»“æ„ä¸ç®—æ³•</a></li><li><a target="_blank" rel="noopener noreferrer" href="https://github.com/HeyiMaster/enhanfe">â­ï¸Â Â GitHub<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="__dumi-default-external-link-icon"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><div class="__dumi-default-dark"><div class="__dumi-default-dark-switch "><button title="Dark theme" class="__dumi-default-dark-moon "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3854" width="22" height="22"><path d="M991.816611 674.909091a69.166545 69.166545 0 0 0-51.665455-23.272727 70.795636 70.795636 0 0 0-27.438545 5.585454A415.674182 415.674182 0 0 1 754.993338 698.181818c-209.594182 0-393.472-184.785455-393.472-395.636363 0-52.363636 38.539636-119.621818 69.515637-173.614546 4.887273-8.610909 9.634909-16.756364 14.103272-24.901818A69.818182 69.818182 0 0 0 384.631156 0a70.842182 70.842182 0 0 0-27.438545 5.585455C161.678429 90.298182 14.362065 307.898182 14.362065 512c0 282.298182 238.824727 512 532.38691 512a522.286545 522.286545 0 0 0 453.957818-268.334545A69.818182 69.818182 0 0 0 991.816611 674.909091zM546.679156 954.181818c-248.785455 0-462.941091-192-462.941091-442.181818 0-186.647273 140.637091-372.829091 300.939637-442.181818-36.817455 65.629091-92.578909 151.970909-92.578909 232.727273 0 250.181818 214.109091 465.454545 462.917818 465.454545a488.331636 488.331636 0 0 0 185.181091-46.545455 453.003636 453.003636 0 0 1-393.565091 232.727273z m103.656728-669.323636l-14.266182 83.781818a34.909091 34.909091 0 0 0 50.362182 36.770909l74.775272-39.563636 74.752 39.563636a36.142545 36.142545 0 0 0 16.174546 3.956364 34.909091 34.909091 0 0 0 34.210909-40.727273l-14.289455-83.781818 60.509091-59.345455a35.025455 35.025455 0 0 0-19.223272-59.578182l-83.61891-12.101818-37.376-76.101818a34.56 34.56 0 0 0-62.254545 0l-37.376 76.101818-83.618909 12.101818a34.909091 34.909091 0 0 0-19.246546 59.578182z m70.423272-64.698182a34.280727 34.280727 0 0 0 26.135273-19.083636l14.312727-29.090909 14.336 29.090909a34.257455 34.257455 0 0 0 26.135273 19.083636l32.046546 4.887273-23.272728 22.574545a35.234909 35.234909 0 0 0-10.007272 30.952727l5.46909 32.116364-28.625454-15.127273a34.490182 34.490182 0 0 0-32.302546 0l-28.695272 15.127273 5.469091-32.116364a35.141818 35.141818 0 0 0-9.984-30.952727l-23.272728-22.574545z" p-id="3855"></path></svg></button><button title="Light theme" class="__dumi-default-dark-sun "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4026" width="22" height="22"><path d="M915.2 476.16h-43.968c-24.704 0-44.736 16-44.736 35.84s20.032 35.904 44.736 35.904H915.2c24.768 0 44.8-16.064 44.8-35.904s-20.032-35.84-44.8-35.84zM512 265.6c-136.704 0-246.464 109.824-246.464 246.4 0 136.704 109.76 246.464 246.464 246.464S758.4 648.704 758.4 512c0-136.576-109.696-246.4-246.4-246.4z m0 425.6c-99.008 0-179.2-80.128-179.2-179.2 0-98.944 80.192-179.2 179.2-179.2S691.2 413.056 691.2 512c0 99.072-80.192 179.2-179.2 179.2zM197.44 512c0-19.84-19.136-35.84-43.904-35.84H108.8c-24.768 0-44.8 16-44.8 35.84s20.032 35.904 44.8 35.904h44.736c24.768 0 43.904-16.064 43.904-35.904zM512 198.464c19.776 0 35.84-20.032 35.84-44.8v-44.8C547.84 84.032 531.84 64 512 64s-35.904 20.032-35.904 44.8v44.8c0 24.768 16.128 44.864 35.904 44.864z m0 627.136c-19.776 0-35.904 20.032-35.904 44.8v44.736C476.096 940.032 492.16 960 512 960s35.84-20.032 35.84-44.8v-44.736c0-24.768-16.064-44.864-35.84-44.864z m329.92-592.832c17.472-17.536 20.288-43.072 6.4-57.024-14.016-14.016-39.488-11.2-57.024 6.336-4.736 4.864-26.496 26.496-31.36 31.36-17.472 17.472-20.288 43.008-6.336 57.024 13.952 14.016 39.488 11.2 57.024-6.336 4.8-4.864 26.496-26.56 31.296-31.36zM213.376 759.936c-4.864 4.8-26.56 26.624-31.36 31.36-17.472 17.472-20.288 42.944-6.4 56.96 14.016 13.952 39.552 11.2 57.024-6.336 4.8-4.736 26.56-26.496 31.36-31.36 17.472-17.472 20.288-43.008 6.336-56.96-14.016-13.952-39.552-11.072-56.96 6.336z m19.328-577.92c-17.536-17.536-43.008-20.352-57.024-6.336-14.08 14.016-11.136 39.488 6.336 57.024 4.864 4.864 26.496 26.56 31.36 31.424 17.536 17.408 43.008 20.288 56.96 6.336 14.016-14.016 11.264-39.488-6.336-57.024-4.736-4.864-26.496-26.56-31.296-31.424z m527.168 628.608c4.864 4.864 26.624 26.624 31.36 31.424 17.536 17.408 43.072 20.224 57.088 6.336 13.952-14.016 11.072-39.552-6.4-57.024-4.864-4.8-26.56-26.496-31.36-31.36-17.472-17.408-43.072-20.288-57.024-6.336-13.952 14.016-11.008 39.488 6.336 56.96z" p-id="4027"></path></svg></button><button title="Default to system" class="__dumi-default-dark-auto "><svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="11002" width="22" height="22"><path d="M127.658667 492.885333c0-51.882667 10.24-101.717333 30.378666-149.162666s47.786667-88.064 81.92-122.538667 75.093333-61.781333 122.538667-81.92 96.938667-30.378667 149.162667-30.378667 101.717333 10.24 149.162666 30.378667 88.405333 47.786667 122.88 81.92 61.781333 75.093333 81.92 122.538667 30.378667 96.938667 30.378667 149.162666-10.24 101.717333-30.378667 149.162667-47.786667 88.405333-81.92 122.88-75.093333 61.781333-122.88 81.92-97.28 30.378667-149.162666 30.378667-101.717333-10.24-149.162667-30.378667-88.064-47.786667-122.538667-81.92-61.781333-75.093333-81.92-122.88-30.378667-96.938667-30.378666-149.162667z m329.045333 0c0 130.048 13.994667 244.394667 41.984 343.381334h12.970667c46.762667 0 91.136-9.216 133.461333-27.306667s78.848-42.666667 109.568-73.386667 54.954667-67.242667 73.386667-109.568 27.306667-86.698667 27.306666-133.461333c0-46.421333-9.216-90.794667-27.306666-133.12s-42.666667-78.848-73.386667-109.568-67.242667-54.954667-109.568-73.386667-86.698667-27.306667-133.461333-27.306666h-11.605334c-28.672 123.562667-43.349333 237.909333-43.349333 343.722666z" p-id="11003"></path></svg></button></div></div></div><ul class="__dumi-default-menu-list"><li><a href="/basic/cache">ç¼“å­˜åœ¨æ€§èƒ½ä¼˜åŒ–æ–¹é¢çš„åº”ç”¨</a></li><li><a href="/basic/crossdomain">è·¨åŸŸèµ„æºè¯·æ±‚</a></li><li><a href="/basic/workbox">Workbox åº”ç”¨</a></li><li><a aria-current="page" class="active" href="/basic/day">åŸºç¡€çŸ¥è¯†</a></li></ul></div></div><ul role="slug-list" class="__dumi-default-layout-toc"><li title="React / Vue é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ" data-depth="2"><a href="/basic/day#react--vue-é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™-keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><span>React / Vue é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li title="Vue" data-depth="3"><a href="/basic/day#vue"><span>Vue</span></a></li><li title="React" data-depth="3"><a href="/basic/day#react"><span>React</span></a></li><li title="[1, 2, 3].map(parseInt)æ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±" data-depth="2"><a href="/basic/day#1-2-3mapparseintæ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±"><span>[1, 2, 3].map(parseInt)æ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±</span></a></li><li title="ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ" data-depth="2"><a href="/basic/day#ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ"><span>ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ</span></a></li><li title="ä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap ï¼Ÿ" data-depth="2"><a href="/basic/day#ä»‹ç»ä¸‹-setã€mapã€weakset-å’Œ-weakmap-ï¼Ÿ"><span>ä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap ï¼Ÿ</span></a></li><li title="ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç° ï¼Ÿ" data-depth="2"><a href="/basic/day#ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç°-ï¼Ÿ"><span>ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç° ï¼Ÿ</span></a></li><li title="ES5 å’Œ ES6 çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" data-depth="2"><a href="/basic/day#es5-å’Œ-es6-çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><span>ES5 å’Œ ES6 çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li><li title="è¯´è¯´ setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«" data-depth="2"><a href="/basic/day#è¯´è¯´-settimeoutã€promiseã€asyncawait-çš„åŒºåˆ«"><span>è¯´è¯´ setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«</span></a></li><li title="setTimeout" data-depth="3"><a href="/basic/day#settimeout"><span>setTimeout</span></a></li><li title="Promise" data-depth="3"><a href="/basic/day#promise"><span>Promise</span></a></li><li title="async/await" data-depth="3"><a href="/basic/day#asyncawait"><span>async/await</span></a></li><li title="æœ€åçœ‹çœ‹ babel es8 ç¼–è¯‘ async/await çš„ç»“æœ" data-depth="3"><a href="/basic/day#æœ€åçœ‹çœ‹-babel-es8-ç¼–è¯‘-asyncawait-çš„ç»“æœ"><span>æœ€åçœ‹çœ‹ babel es8 ç¼–è¯‘ async/await çš„ç»“æœ</span></a></li><li title="call å’Œ apply çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›" data-depth="2"><a href="/basic/day#call-å’Œ-apply-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›"><span>call å’Œ apply çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›</span></a></li><li title="ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ 1x1 åƒç´ çš„é€æ˜ gif å›¾ç‰‡ï¼Ÿ" data-depth="2"><a href="/basic/day#ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯-1x1-åƒç´ çš„é€æ˜-gif-å›¾ç‰‡ï¼Ÿ"><span>ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ 1x1 åƒç´ çš„é€æ˜ gif å›¾ç‰‡ï¼Ÿ</span></a></li><li title="è¦æ±‚è®¾è®¡ LazyMan ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½" data-depth="2"><a href="/basic/day#è¦æ±‚è®¾è®¡-lazyman-ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½"><span>è¦æ±‚è®¾è®¡ LazyMan ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½</span></a></li><li title="åˆ†æ" data-depth="3"><a href="/basic/day#åˆ†æ"><span>åˆ†æ</span></a></li><li title="ä»£ç " data-depth="3"><a href="/basic/day#ä»£ç "><span>ä»£ç </span></a></li><li title="è¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚" data-depth="2"><a href="/basic/day#è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚"><span>è¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚</span></a></li><li title="åˆ†æ" data-depth="3"><a href="/basic/day#åˆ†æ-1"><span>åˆ†æ</span></a></li><li title="ä»£ç " data-depth="3"><a href="/basic/day#ä»£ç -1"><span>ä»£ç </span></a></li><li title="è¯´è¯´ HTTPS åŸç†åŠæ¡æ‰‹è¿‡ç¨‹" data-depth="2"><a href="/basic/day#è¯´è¯´-https-åŸç†åŠæ¡æ‰‹è¿‡ç¨‹"><span>è¯´è¯´ HTTPS åŸç†åŠæ¡æ‰‹è¿‡ç¨‹</span></a></li><li title="client --&gt; server" data-depth="3"><a href="/basic/day#client----server"><span>client --&gt; server</span></a></li><li title="server --&gt; client" data-depth="3"><a href="/basic/day#server----client"><span>server --&gt; client</span></a></li><li title="client --&gt; server" data-depth="3"><a href="/basic/day#client----server-1"><span>client --&gt; server</span></a></li><li title="server --&gt; client" data-depth="3"><a href="/basic/day#server----client-1"><span>server --&gt; client</span></a></li><li title="ã€ç™¾åº¦ã€‘å®ç° (5).add(3).minus(2) åŠŸèƒ½ã€‚" data-depth="2"><a href="/basic/day#ã€ç™¾åº¦ã€‘å®ç°-5add3minus2-åŠŸèƒ½ã€‚"><span>ã€ç™¾åº¦ã€‘å®ç° (5).add(3).minus(2) åŠŸèƒ½ã€‚</span></a></li><li title="è®©ä¸€ä¸ª div æ°´å¹³å‚ç›´å±…ä¸­" data-depth="2"><a href="/basic/day#è®©ä¸€ä¸ª-div-æ°´å¹³å‚ç›´å±…ä¸­"><span>è®©ä¸€ä¸ª div æ°´å¹³å‚ç›´å±…ä¸­</span></a></li><li title="ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«" data-depth="2"><a href="/basic/day#ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«"><span>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«</span></a></li><li title="Redux çš„ reducer ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ" data-depth="2"><a href="/basic/day#redux-çš„-reducer-ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ"><span>Redux çš„ reducer ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ</span></a></li><li title="ä»‹ç»ä¸‹ BFC åŠå…¶åº”ç”¨" data-depth="2"><a href="/basic/day#ä»‹ç»ä¸‹-bfc-åŠå…¶åº”ç”¨"><span>ä»‹ç»ä¸‹ BFC åŠå…¶åº”ç”¨</span></a></li><li title="å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º 300px ï¼Ÿ" data-depth="2"><a href="/basic/day#å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º-300px-ï¼Ÿ"><span>å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º 300px ï¼Ÿ</span></a></li><li title="æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º 0 - 9" data-depth="2"><a href="/basic/day#æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º-0---9"><span>æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º 0 - 9</span></a></li><li title="ä»‹ç»ä¸‹ npm æ¨¡å—å®‰è£…æœºåˆ¶" data-depth="2"><a href="/basic/day#ä»‹ç»ä¸‹-npm-æ¨¡å—å®‰è£…æœºåˆ¶"><span>ä»‹ç»ä¸‹ npm æ¨¡å—å®‰è£…æœºåˆ¶</span></a></li><li title="npm æ¨¡å—å®‰è£…æœºåˆ¶ï¼š" data-depth="3"><a href="/basic/day#npm-æ¨¡å—å®‰è£…æœºåˆ¶ï¼š"><span>npm æ¨¡å—å®‰è£…æœºåˆ¶ï¼š</span></a></li><li title="Web Worker æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨" data-depth="2"><a href="/basic/day#web-worker-æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨"><span>Web Worker æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨</span></a></li><li title="æ˜¯ä»€ä¹ˆ" data-depth="3"><a href="/basic/day#æ˜¯ä»€ä¹ˆ"><span>æ˜¯ä»€ä¹ˆ</span></a></li><li title="è¯·æ‰‹å†™ bind ã€apply" data-depth="2"><a href="/basic/day#è¯·æ‰‹å†™-bind-ã€apply"><span>è¯·æ‰‹å†™ bind ã€apply</span></a></li><li title="è¯·æ‰‹å†™ä¸€ä¸ª webpack æ’ä»¶ï¼ˆpluginï¼‰" data-depth="2"><a href="/basic/day#è¯·æ‰‹å†™ä¸€ä¸ª-webpack-æ’ä»¶ï¼ˆpluginï¼‰"><span>è¯·æ‰‹å†™ä¸€ä¸ª webpack æ’ä»¶ï¼ˆpluginï¼‰</span></a></li><li title="è¯·æ‰‹å†™ä¸€ä¸ª webpack loader" data-depth="2"><a href="/basic/day#è¯·æ‰‹å†™ä¸€ä¸ª-webpack-loader"><span>è¯·æ‰‹å†™ä¸€ä¸ª webpack loader</span></a></li><li title="åˆ¤æ–­æ•°ç»„çš„æ–¹æ³• Object.prototype.toString.call() ã€ instanceof ä»¥åŠ Array.isArray()ï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£" data-depth="2"><a href="/basic/day#åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•-objectprototypetostringcall-ã€-instanceof-ä»¥åŠ-arrayisarrayï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£"><span>åˆ¤æ–­æ•°ç»„çš„æ–¹æ³• Object.prototype.toString.call() ã€ instanceof ä»¥åŠ Array.isArray()ï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£</span></a></li><li title="ä½¿ç”¨ this çš„å…¸å‹ä¾‹å­" data-depth="2"><a href="/basic/day#ä½¿ç”¨-this-çš„å…¸å‹ä¾‹å­"><span>ä½¿ç”¨ this çš„å…¸å‹ä¾‹å­</span></a></li><li title="å¯¹a == (&#x27;1&#x27;||&#x27;2&#x27;||&#x27;3&#x27;) ? false : trueå†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•" data-depth="2"><a href="/basic/day#å¯¹a--123--false--trueå†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•"><span>å¯¹a == (&#x27;1&#x27;||&#x27;2&#x27;||&#x27;3&#x27;) ? false : trueå†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•</span></a></li><li title="a.b.c.d å’Œ a[&#x27;b&#x27;][&#x27;c&#x27;][&#x27;d&#x27;]ï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ" data-depth="2"><a href="/basic/day#abcd-å’Œ-abcdï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ"><span>a.b.c.d å’Œ a[&#x27;b&#x27;][&#x27;c&#x27;][&#x27;d&#x27;]ï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ</span></a></li><li title="å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾" data-depth="2"><a href="/basic/day#å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾"><span>å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾</span></a></li><li title="react-router é‡Œçš„ Link æ ‡ç­¾å’Œ a æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«" data-depth="2"><a href="/basic/day#react-router-é‡Œçš„-link-æ ‡ç­¾å’Œ-a-æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«"><span>react-router é‡Œçš„ Link æ ‡ç­¾å’Œ a æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«</span></a></li><li title="ä¸ºä»€ä¹ˆè¦ç”¨ redux-sagaï¼Ÿçœ‹è¿‡ dva æºç å—ï¼Ÿ" data-depth="2"><a href="/basic/day#ä¸ºä»€ä¹ˆè¦ç”¨-redux-sagaï¼Ÿçœ‹è¿‡-dva-æºç å—ï¼Ÿ"><span>ä¸ºä»€ä¹ˆè¦ç”¨ redux-sagaï¼Ÿçœ‹è¿‡ dva æºç å—ï¼Ÿ</span></a></li><li title="redux" data-depth="3"><a href="/basic/day#redux"><span>redux</span></a></li><li title="redux-saga" data-depth="3"><a href="/basic/day#redux-saga"><span>redux-saga</span></a></li><li title="redux-saga ä¸å…¶ä»– redux ä¸­é—´ä»¶æ¯”è¾ƒ" data-depth="3"><a href="/basic/day#redux-saga-ä¸å…¶ä»–-redux-ä¸­é—´ä»¶æ¯”è¾ƒ"><span>redux-saga ä¸å…¶ä»– redux ä¸­é—´ä»¶æ¯”è¾ƒ</span></a></li><li title="ä»‹ç»ä¸‹ webpack çƒ­æ›´æ–°åŸç†" data-depth="2"><a href="/basic/day#ä»‹ç»ä¸‹-webpack-çƒ­æ›´æ–°åŸç†"><span>ä»‹ç»ä¸‹ webpack çƒ­æ›´æ–°åŸç†</span></a></li></ul><div class="__dumi-default-layout-content"><div class="markdown"><h2 id="react--vue-é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™-keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#react--vue-é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™-keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="icon icon-link"></span></a>React / Vue é¡¹ç›®ä¸ºä»€ä¹ˆè¦åœ¨åˆ—è¡¨ç»„ä»¶ä¸­å†™ keyï¼Œå…¶ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</h2><blockquote><p>key æ˜¯è™šæ‹ŸèŠ‚ç‚¹çš„å”¯ä¸€ idï¼Œé€šè¿‡å¯ä»¥èƒ½å¤Ÿæ›´å¿«æ›´å‡†ç¡®æ‰¾åˆ°æ›´æ–°å‰å¯¹åº”çš„è™šæ‹ŸèŠ‚ç‚¹ã€‚</p></blockquote><p><code>Vue</code>å’Œ<code>React</code>éƒ½æ˜¯é€šè¿‡ diff ç®—æ³•å¯¹æ¯”æ–°æ—§è™šæ‹Ÿæ ‘èŠ‚ç‚¹å·®å¼‚ï¼Œç„¶åæ›´æ–°èŠ‚ç‚¹ã€‚å½“æ–°æ—§èŠ‚ç‚¹å¯¹æ¯”ä¸ä¸€è‡´æ—¶ï¼Œä¼šæ ¹æ®èŠ‚ç‚¹çš„ key å»æ‰¾å¯»æ—§èŠ‚ç‚¹ï¼Œå¦‚æœæœªæ‰¾åˆ°åˆ™è¡¨æ˜ä¸ºæ–°çš„èŠ‚ç‚¹ï¼Œåä¹‹ä¼šè¿›è¡Œå¤ç”¨ã€‚</p><p>é’ˆå¯¹è¿™ä¸ªé—®é¢˜æˆ‘ä»¬åº”è¯¥è¾©è¯çœ‹å¾…ï¼Œå¹¶ä¸æ˜¯è¯´ä¹¦å†™ key ä¸€å®šæ˜¯å¥½çš„ï¼Œä¸€å®šæ˜¯æå‡æ€§èƒ½çš„ã€‚</p><h3 id="vue"><a aria-hidden="true" tabindex="-1" href="/basic/day#vue"><span class="icon icon-link"></span></a>Vue</h3><p>å¦‚æœæ˜¯ç®€å•åˆ—è¡¨ï¼Œä¸”åˆ—è¡¨åªæ˜¯å•çº¯æ•°æ®å±•ç¤ºï¼Œæ— ç›¸å…³çŠ¶æ€çš„æ›´æ”¹ï¼Œåˆ™å¯ä¸ä½¿ç”¨ keyï¼Œè¿™æ ·åœ¨æ•°æ®æ›´æ–°é‡æ–°æ¸²æŸ“æ—¶ä¼šæ›´å¿«ï¼Œå› ä¸ºä¼šè·³è¿‡ key çš„æ£€ç´¢ä¸å¤ç”¨é€»è¾‘</p><h3 id="react"><a aria-hidden="true" tabindex="-1" href="/basic/day#react"><span class="icon icon-link"></span></a>React</h3><p>ä¸ç®¡ä½•æ—¶ï¼Œéƒ½è¦æ±‚åˆ—è¡¨å¿…é¡»å¸¦ keyï¼Œå¤§å®¶é˜…è¯»è¿‡<code>React</code>éƒ½ä¼šå‘ç°ï¼Œåœ¨ commit é˜¶æ®µï¼Œæ›´æ–°æ“ä½œé€šè¿‡å¤ç”¨æ¥æå‡æ€§èƒ½ï¼Œè¿™æ ·è™½ç„¶ä¼šæœ‰é¢å¤–æ€§èƒ½å¼€é”€ï¼Œä½†æ˜¯å¯¹æ¯”é¢‘ç¹çš„ DOM æ›´æ–°ï¼Œè¿˜æ˜¯èƒ½æ¥å—çš„ã€‚</p><h2 id="1-2-3mapparseintæ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±"><a aria-hidden="true" tabindex="-1" href="/basic/day#1-2-3mapparseintæ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±"><span class="icon icon-link"></span></a>[1, 2, 3].map(parseInt)æ˜¯å¤šå°‘ï¼Ÿè¯´æ˜ç†ç”±</h2><p>é¦–å…ˆè€ƒè™‘ <code>map</code> æ–¹æ³•çš„å›è°ƒå‡½æ•°å‚æ•°å«ä¹‰</p><p><code>arr.map(function callback(currentValue[, index[, array]]) <!-- -->{<!-- --> <!-- -->}</code></p><ul><li>currentValue å½“å‰éå†çš„å€¼</li><li>index å½“å‰éå†ç´¢å¼•</li><li>array éå†æ•°ç»„</li></ul><p>ç„¶åæˆ‘ä»¬åˆ†æ <code>parseInt</code> å‚æ•°çš„å«ä¹‰</p><p><code>parseInt(string, radix)</code></p><ul><li>string è¢«å¤„ç†çš„å€¼</li><li>radix åŸºæ•°å³è¿›åˆ¶ï¼ˆ2ã€8ã€10ã€16...è¿›åˆ¶ï¼‰</li></ul><p>å½“éå†åˆ° 1 æ—¶ï¼Œmap å›è°ƒå‡½æ•°çš„å‚æ•°åˆ†åˆ«ä¸ºï¼š1ã€0ï¼Œå³ parseInt(1, 0)ï¼Œ1 çš„åè¿›åˆ¶æ•° ä¸º 1</p><p>å½“éå†åˆ° 2 æ—¶ï¼Œmap å›è°ƒå‡½æ•°çš„å‚æ•°åˆ†åˆ«ä¸ºï¼š2ã€1ï¼Œå³ parseInt(2, 1)ï¼Œ1 è¿›åˆ¶æ•°ä¸º 2 çš„æ•°ä¸å­˜åœ¨ï¼Œå³ä¸º <code>NaN</code></p><p>å½“éå†åˆ° 3 æ—¶ï¼Œmap å›è°ƒå‡½æ•°çš„å‚æ•°åˆ†åˆ«ä¸ºï¼š3ã€2ï¼Œå³ parseInt(3, 2)ï¼Œ2 è¿›åˆ¶æ•°ä¸º 3 çš„æ•°ä¸å­˜åœ¨ï¼Œå³ä¸º <code>NaN</code></p><h2 id="ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ"><span class="icon icon-link"></span></a>ä»€ä¹ˆæ˜¯é˜²æŠ–å’ŒèŠ‚æµï¼Ÿä»–ä»¬æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿå¦‚ä½•å®ç°å‘¢ï¼Ÿ</h2><p>åœ¨é«˜é¢‘äº‹ä»¶ï¼ˆä¾‹å¦‚æµè§ˆå™¨é¡µé¢æ»šåŠ¨ï¼‰è§¦å‘æ—¶ï¼Œä¸ºäº†ä¼˜åŒ–æå‡æ€§èƒ½ï¼Œæˆ‘ä»¬ç»å¸¸ä½¿ç”¨åˆ°é˜²æŠ–ä¸èŠ‚æµã€‚</p><p>é˜²æŠ–ï¼šè§¦å‘é«˜é¢‘äº‹ä»¶å n ç§’å†…å‡½æ•°åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœ n ç§’å†…é«˜é¢‘äº‹ä»¶å†æ¬¡è¢«è§¦å‘ï¼Œåˆ™é‡æ–°è®¡ç®—æ—¶é—´</p><p>èŠ‚æµï¼šé«˜é¢‘äº‹ä»¶è§¦å‘ï¼Œä½†åœ¨ n ç§’å†…åªä¼šæ‰§è¡Œä¸€æ¬¡ï¼Œæ‰€ä»¥èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡</p><p>é˜²æŠ–å’ŒèŠ‚æµçš„åŒºåˆ«åœ¨äºï¼Œ<code>é˜²æŠ–</code> æ˜¯å¦‚æœåœ¨ç»™å®š n ç§’å†…å†æ¬¡å‡ºå‘ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—è§¦å‘äº‹ä»¶ï¼Œå¦‚æœä½ ä¸€ç›´è§¦å‘ï¼Œåˆ™ä¸€ç›´é‡æ–°è®¡ç®—ï¼Œç›´è‡³ä½ åœä¸‹ï¼›<code>èŠ‚æµ</code> ä¸é˜²æŠ–çš„åŒºåˆ«æ˜¯ï¼Œä¸ç®¡ä½ æ˜¯å¦é‡å¤è§¦å‘ï¼Œæˆ‘éƒ½ä¼šåœ¨ä½ ç»™å®šçš„æ—¶é—´åˆ°æ¥æ—¶ï¼Œæ‰§è¡Œäº‹ä»¶å‡½æ•°ã€‚</p><p><strong>é˜²æŠ–</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token parameter punctuation">,</span><span class="token parameter"> wait</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// å­˜æ”¾å®šæ—¶å™¨è¿”å›å€¼</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// æ¯å½“ç”¨æˆ·è¾“å…¥æ—¶å°†å‰ä¸€ä¸ªå®šæ—¶å™¨æ¸…é™¤æ‰</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// ç„¶ååˆåˆ›å»ºä¸€ä¸ªæ–°çš„ setTimeout, è¿™æ ·å°±èƒ½ä¿è¯è¾“å…¥å­—ç¬¦åçš„ interval é—´éš”å†…å¦‚æœè¿˜æœ‰å­—ç¬¦è¾“å…¥çš„è¯ï¼Œå°±ä¸ä¼šæ‰§è¡Œ fn å‡½æ•°</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      fn</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token plain"> arguments</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>å½“ç„¶ï¼Œè€ƒè™‘åˆ°å…¶ä»–ä¸€äº›ä¼˜åŒ–åï¼Œæˆ‘ä»¬æœ€ç»ˆä¼˜åŒ–çš„ä»£ç ï¼Œæ”¯æŒç«‹å³æ‰§è¡Œã€è¿”å›å€¼</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">debounce</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token parameter punctuation">,</span><span class="token parameter"> wait</span><span class="token parameter punctuation">,</span><span class="token parameter"> immediate</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> timeout</span><span class="token punctuation">,</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> context </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> args </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">immediate</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// å¦‚æœå·²ç»æ‰§è¡Œè¿‡ï¼Œä¸å†æ‰§è¡Œ</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> callNow </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">!</span><span class="token plain">timeout</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">callNow</span><span class="token punctuation">)</span><span class="token plain"> result </span><span class="token operator">=</span><span class="token plain"> func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>èŠ‚æµ</strong></p><p>æ—¶é—´æˆ³å½¢å¼å®ç°</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token parameter punctuation">,</span><span class="token parameter"> wait</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> previous </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">+</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    context </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    args </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">now </span><span class="token operator">-</span><span class="token plain"> previous </span><span class="token operator">&gt;</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      previous </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>å®šæ—¶å™¨å®ç°</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token parameter punctuation">,</span><span class="token parameter"> wait</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> timeout</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> previous </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    context </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    args </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>æœ€ç»ˆçš„ä¼˜åŒ–</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func</span><span class="token parameter punctuation">,</span><span class="token parameter"> wait</span><span class="token parameter punctuation">,</span><span class="token parameter"> options</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> timeout</span><span class="token punctuation">,</span><span class="token plain"> context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">,</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> previous </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">options</span><span class="token punctuation">)</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> </span><span class="token function-variable function">later</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    previous </span><span class="token operator">=</span><span class="token plain"> options</span><span class="token punctuation">.</span><span class="token property-access">leading</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token plain"> context </span><span class="token operator">=</span><span class="token plain"> args </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> </span><span class="token function-variable function">throttled</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> now </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">previous </span><span class="token operator">&amp;&amp;</span><span class="token plain"> options</span><span class="token punctuation">.</span><span class="token property-access">leading</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token plain"> previous </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> remaining </span><span class="token operator">=</span><span class="token plain"> wait </span><span class="token operator">-</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">now </span><span class="token operator">-</span><span class="token plain"> previous</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    context </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    args </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">remaining </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> remaining </span><span class="token operator">&gt;</span><span class="token plain"> wait</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      previous </span><span class="token operator">=</span><span class="token plain"> now</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      func</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token plain"> context </span><span class="token operator">=</span><span class="token plain"> args </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">timeout </span><span class="token operator">&amp;&amp;</span><span class="token plain"> options</span><span class="token punctuation">.</span><span class="token property-access">trailing</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token plain">later</span><span class="token punctuation">,</span><span class="token plain"> remaining</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> throttled</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>æ·»åŠ å–æ¶ˆåŠŸèƒ½</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">throttled</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">cancel</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">clearTimeout</span><span class="token punctuation">(</span><span class="token plain">timeout</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  previous </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  timeout </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="ä»‹ç»ä¸‹-setã€mapã€weakset-å’Œ-weakmap-ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»‹ç»ä¸‹-setã€mapã€weakset-å’Œ-weakmap-ï¼Ÿ"><span class="icon icon-link"></span></a>ä»‹ç»ä¸‹ Setã€Mapã€WeakSet å’Œ WeakMap ï¼Ÿ</h2><p><code>Set</code> å’Œ <code>Map</code> ä¸»è¦çš„åº”ç”¨åœºæ™¯åœ¨äº <strong>æ•°æ®é‡ç»„</strong> å’Œ <strong>æ•°æ®å‚¨å­˜</strong></p><p><code>Set</code> æ˜¯ä¸€ç§å«åš<strong>é›†åˆ</strong>çš„æ•°æ®ç»“æ„ï¼ŒMap æ˜¯ä¸€ç§å«åš<strong>å­—å…¸</strong>çš„æ•°æ®ç»“æ„</p><ul><li>Set<ul><li>æˆå‘˜å”¯ä¸€ã€æ— åºä¸”ä¸é‡å¤</li><li>[value, value]ï¼Œé”®å€¼ä¸é”®åæ˜¯ä¸€è‡´çš„ï¼ˆæˆ–è€…è¯´åªæœ‰é”®å€¼ï¼Œæ²¡æœ‰é”®åï¼‰</li><li>å¯ä»¥éå†ï¼Œæ–¹æ³•æœ‰ï¼šaddã€deleteã€has</li></ul></li><li>WeakSet<ul><li>æˆå‘˜éƒ½æ˜¯å¯¹è±¡</li><li>æˆå‘˜éƒ½æ˜¯å¼±å¼•ç”¨ï¼Œå¯ä»¥è¢«åƒåœ¾å›æ”¶æœºåˆ¶å›æ”¶ï¼Œå¯ä»¥ç”¨æ¥ä¿å­˜ DOM èŠ‚ç‚¹ï¼Œä¸å®¹æ˜“é€ æˆå†…å­˜æ³„æ¼</li><li>ä¸èƒ½éå†ï¼Œæ–¹æ³•æœ‰ addã€deleteã€has</li></ul></li><li>Map<ul><li>æœ¬è´¨ä¸Šæ˜¯é”®å€¼å¯¹çš„é›†åˆï¼Œç±»ä¼¼é›†åˆ</li><li>å¯ä»¥éå†ï¼Œæ–¹æ³•å¾ˆå¤šå¯ä»¥è·Ÿå„ç§æ•°æ®æ ¼å¼è½¬æ¢</li></ul></li><li>WeakMap<ul><li>åªæ¥å—å¯¹è±¡ä½œä¸ºé”®åï¼ˆnull é™¤å¤–ï¼‰ï¼Œä¸æ¥å—å…¶ä»–ç±»å‹çš„å€¼ä½œä¸ºé”®å</li><li>é”®åæ˜¯å¼±å¼•ç”¨ï¼Œé”®å€¼å¯ä»¥æ˜¯ä»»æ„çš„ï¼Œé”®åæ‰€æŒ‡å‘çš„å¯¹è±¡å¯ä»¥è¢«åƒåœ¾å›æ”¶ï¼Œæ­¤æ—¶é”®åæ˜¯æ— æ•ˆçš„</li><li>ä¸èƒ½éå†ï¼Œæ–¹æ³•æœ‰ getã€setã€hasã€delete</li></ul></li></ul><h2 id="ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç°-ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç°-ï¼Ÿ"><span class="icon icon-link"></span></a>ä»‹ç»ä¸‹æ·±åº¦ä¼˜å…ˆéå†å’Œå¹¿åº¦ä¼˜å…ˆéå†ï¼Œå¦‚ä½•å®ç° ï¼Ÿ</h2><p>åœ¨è¿›è¡Œå›¾çš„éå†æ—¶ï¼Œä¼šé‡åˆ° <code>æ·±åº¦ä¼˜å…ˆ</code> å’Œ <code>å¹¿åº¦ä¼˜å…ˆ</code> ã€‚é€šè¿‡å­—é¢æ„æ€ï¼Œæˆ‘ä»¬èƒ½çŒœå‡ºå¤§æ¦‚ï¼Œä¸€ä¸ªæ˜¯å‚ç›´æ·±å…¥ï¼Œä¸€ä¸ªæ˜¯å‘æ•£å¹¿åº¦ã€‚</p><ul><li><p><code>æ·±åº¦ä¼˜å…ˆ</code> æˆ‘ä»¬å¯ä»¥å€ŸåŠ©æ ˆä¿å­˜ä¸´æ—¶æ•°æ®ï¼Œç›´è‡³åœ¨æŸä¸ªåˆ†æ”¯æ— ä¸‹ä¸€ä¸ªå…ƒç´ ï¼Œåˆ™å‡ºæ ˆï¼Œå¹¶è¿›è¡Œåˆ¤æ–­è¯¥èŠ‚ç‚¹çš„å…„å¼ŸèŠ‚ç‚¹æ—¶å€™æœ‰ä¸‹ä¸ªèŠ‚ç‚¹ï¼Œæœ‰åˆ™éå†ï¼Œä»¥æ­¤ç±»æ¨ã€‚</p></li><li><p><code>å¹¿åº¦ä¼˜å…ˆ</code> å€ŸåŠ©é˜Ÿåˆ—ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ï¼Œå…ˆéå†å®Œæ‰€æœ‰ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå†ä¸€æ¬¡éå†èŠ‚ç‚¹çš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹ã€‚</p></li></ul><p><strong>æ·±åº¦ä¼˜å…ˆï¼ˆDFSï¼‰</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Graph</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">dfs</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> marked </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">vertices</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">marked</span><span class="token punctuation">[</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">vertices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">dfsVisit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">vertices</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">dfsVisit</span><span class="token punctuation">(</span><span class="token parameter">u</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">let</span><span class="token plain"> edges </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">edges</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    marked</span><span class="token punctuation">[</span><span class="token plain">u</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">u</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> neighbors </span><span class="token operator">=</span><span class="token plain"> edges</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token plain">u</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> neighbors</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> w </span><span class="token operator">=</span><span class="token plain"> neighbors</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">marked</span><span class="token punctuation">[</span><span class="token plain">w</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function">dfsVisit</span><span class="token punctuation">(</span><span class="token plain">w</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p><strong>å¹¿åº¦ä¼˜å…ˆï¼ˆBFSï¼‰</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Graph</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">bfs</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> queue </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    marked </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  marked</span><span class="token punctuation">[</span><span class="token plain">v</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  queue</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain">v</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// æ·»åŠ åˆ°é˜Ÿå°¾</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">while</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">queue</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> s </span><span class="token operator">=</span><span class="token plain"> queue</span><span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// ä»é˜Ÿé¦–ç§»é™¤</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">edges</span><span class="token punctuation">.</span><span class="token method function property-access">has</span><span class="token punctuation">(</span><span class="token plain">s</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;visited vertex: &#x27;</span><span class="token punctuation">,</span><span class="token plain"> s</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">let</span><span class="token plain"> neighbors </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">edges</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token plain">s</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> neighbors</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> w </span><span class="token operator">=</span><span class="token plain"> neighbors</span><span class="token punctuation">[</span><span class="token plain">i</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">marked</span><span class="token punctuation">[</span><span class="token plain">w</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        marked</span><span class="token punctuation">[</span><span class="token plain">w</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        queue</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain">w</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="es5-å’Œ-es6-çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#es5-å’Œ-es6-çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><span class="icon icon-link"></span></a>ES5 å’Œ ES6 çš„ç»§æ‰¿æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h2><ul><li><code>class</code> å£°æ˜å˜é‡ä¼šæå‡ï¼Œä½†ä¸ä¼šåˆå§‹åŒ–èµ‹å€¼ã€‚å˜é‡è¿›å…¥æš‚æ—¶æ€§æ­»åŒºï¼Œç±»ä¼¼äº <code>let</code>ã€<code>const</code> å£°æ˜</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> m </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// ReferenceError: Foo is not defined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><ul><li><code>class</code> å£°æ˜å†…éƒ¨ä¼šå¯ç”¨ä¸¥æ ¼æ¨¡å¼</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  baz </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    fol </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// ReferenceError: fol is not defined</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> m </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><ul><li><code>class</code> çš„æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰æ˜¯ä¸å¯æšä¸¾</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// å¼•ç”¨ä¸€ä¸ªæœªå£°æ˜çš„å˜é‡</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">People</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">say</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">People</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">eat</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> pKeys </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token maybe-class-name">Bar</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;say&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> pProtoKeys </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token class-name">Bar</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [&#x27;eat&#x27;]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">static</span><span class="token plain"> </span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> mKeys </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token maybe-class-name">Man</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// []</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> mProtoKeys </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">.</span><span class="token method function property-access">keys</span><span class="token punctuation">(</span><span class="token class-name">Man</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// []</span></div></pre></div><ul><li><code>class</code> çš„æ‰€æœ‰æ–¹æ³•ï¼ˆåŒ…æ‹¬é™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•ï¼‰éƒ½æ²¡æœ‰åŸå‹å¯¹è±¡ prototypeï¼Œæ‰€ä»¥ä¹Ÿæ²¡æœ‰<code>[[construct]]</code>ï¼Œä¸èƒ½ä½¿ç”¨ <code>new</code> æ¥è°ƒç”¨ã€‚</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">People</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">print</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> pPrint </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">bar</span><span class="token class-name punctuation">.</span><span class="token class-name">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">42</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> m </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> mPrint </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">m</span><span class="token class-name punctuation">.</span><span class="token class-name">print</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// TypeError: foo.print is not a constructor</span></div></pre></div><ul><li>å¿…é¡»ä½¿ç”¨ <code>new</code> è°ƒç”¨ <code>class</code>ã€‚</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> m </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function maybe-class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// TypeError: Class constructor Foo cannot be invoked without &#x27;new&#x27;</span></div></pre></div><ul><li><code>class</code> å†…éƒ¨æ— æ³•é‡å†™ç±»åã€‚</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token maybe-class-name">People</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Pap&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">bar</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> p </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">People</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// People: &#x27;Pap&#x27;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// bar: People {bar: 1}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">foo</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">42</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token maybe-class-name">Man</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Woman&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// TypeError: Assignment to constant variable</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> m </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Man</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token maybe-class-name">Man</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;Fol&#x27;</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// it&#x27;s ok</span></div></pre></div><h2 id="è¯´è¯´-settimeoutã€promiseã€asyncawait-çš„åŒºåˆ«"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯´è¯´-settimeoutã€promiseã€asyncawait-çš„åŒºåˆ«"><span class="icon icon-link"></span></a>è¯´è¯´ setTimeoutã€Promiseã€Async/Await çš„åŒºåˆ«</h2><p>è€ƒè™‘è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬é¦–å…ˆå›é¡¾ä¸€ä¸ªæ¦‚å¿µï¼šäº‹ä»¶å¾ªç¯ä¸­çš„å®ä»»åŠ¡é˜Ÿåˆ—å’Œå¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚</p><ul><li>setTimeout çš„å›è°ƒå‡½æ•°æ”¾åˆ°å®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰åˆ°æ‰§è¡Œæ ˆæ¸…ç©ºä»¥åæ‰§è¡Œ</li><li>promise.then é‡Œçš„å›è°ƒå‡½æ•°ä¼šæ”¾åˆ°ç›¸åº”å®ä»»åŠ¡çš„å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œç­‰å®ä»»åŠ¡é‡Œé¢çš„åŒæ­¥ä»£ç æ‰§è¡Œå®Œå†æ‰§è¡Œ</li><li>async å‡½æ•°è¡¨ç¤ºå‡½æ•°é‡Œé¢å¯èƒ½ä¼šæœ‰å¼‚æ­¥æ–¹æ³•ï¼Œawait åé¢è·Ÿä¸€ä¸ªè¡¨è¾¾å¼ï¼Œasync æ–¹æ³•æ‰§è¡Œæ—¶ï¼Œé‡åˆ° await ä¼šç«‹å³æ‰§è¡Œè¡¨è¾¾å¼ï¼Œç„¶åæŠŠè¡¨è¾¾å¼åé¢çš„ä»£ç æ”¾åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œï¼Œè®©å‡ºæ‰§è¡Œæ ˆè®©åŒæ­¥ä»£ç å…ˆæ‰§è¡Œ</li></ul><p>æˆ‘ä»¬é€šè¿‡ç®€å•ä»£ç æ¥ç†è§£ä¸€ä¸‹</p><h3 id="settimeout"><a aria-hidden="true" tabindex="-1" href="/basic/day#settimeout"><span class="icon icon-link"></span></a>setTimeout</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;start&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;settimeout&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;end&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// è¾“å‡ºé¡ºåºï¼šstart-&gt;end-&gt;settimeout</span></div></pre></div><h3 id="promise"><a aria-hidden="true" tabindex="-1" href="/basic/day#promise"><span class="icon icon-link"></span></a>Promise</h3><p>Promise æœ¬èº«æ˜¯<strong>åŒæ­¥çš„ç«‹å³æ‰§è¡Œå‡½æ•°</strong>ï¼Œ å½“åœ¨ executor ä¸­æ‰§è¡Œ resolve æˆ–è€… reject çš„æ—¶å€™, æ­¤æ—¶æ˜¯å¼‚æ­¥æ“ä½œï¼Œ ä¼šå…ˆæ‰§è¡Œ then/catch ç­‰ï¼Œå½“ä¸»æ ˆå®Œæˆåï¼Œæ‰ä¼šå»è°ƒç”¨ resolve/reject ä¸­å­˜æ”¾çš„æ–¹æ³•æ‰§è¡Œï¼Œæ‰“å° p çš„æ—¶å€™ï¼Œæ˜¯æ‰“å°çš„è¿”å›ç»“æœï¼Œä¸€ä¸ª Promise å®ä¾‹ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;script start&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> promise1 </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;promise1&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;promise1 end&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;promise2&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;settimeout&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;script end&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// è¾“å‡ºé¡ºåº: script start-&gt;promise1-&gt;promise1 end-&gt;script end-&gt;promise2-&gt;settimeout</span></div></pre></div><p>å½“ JS ä¸»çº¿ç¨‹æ‰§è¡Œåˆ° Promise å¯¹è±¡æ—¶ï¼Œ</p><ul><li>promise1.then() çš„å›è°ƒå°±æ˜¯ä¸€ä¸ª task</li><li>promise1 æ˜¯ resolved æˆ– rejected: é‚£è¿™ä¸ª task å°±ä¼šæ”¾å…¥å½“å‰äº‹ä»¶å¾ªç¯å›åˆçš„ microtask queue</li><li>promise1 æ˜¯ pending: è¿™ä¸ª task å°±ä¼šæ”¾å…¥ äº‹ä»¶å¾ªç¯çš„æœªæ¥çš„æŸä¸ª(å¯èƒ½ä¸‹ä¸€ä¸ª)å›åˆçš„ microtask queue ä¸­</li><li>setTimeout çš„å›è°ƒä¹Ÿæ˜¯ä¸ª task ï¼Œå®ƒä¼šè¢«æ”¾å…¥ macrotask queue å³ä½¿æ˜¯ 0ms çš„æƒ…å†µ</li></ul><h3 id="asyncawait"><a aria-hidden="true" tabindex="-1" href="/basic/day#asyncawait"><span class="icon icon-link"></span></a>async/await</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;async1 start&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;async1 end&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">async2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;async2&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;script start&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">async1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;script end&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// è¾“å‡ºé¡ºåºï¼šscript start-&gt;async1 start-&gt;async2-&gt;script end-&gt;async1 end</span></div></pre></div><p>async å‡½æ•°è¿”å›ä¸€ä¸ª Promise å¯¹è±¡ï¼Œå½“å‡½æ•°æ‰§è¡Œçš„æ—¶å€™ï¼Œä¸€æ—¦é‡åˆ° await å°±ä¼šå…ˆè¿”å›ï¼Œç­‰åˆ°è§¦å‘çš„å¼‚æ­¥æ“ä½œå®Œæˆï¼Œå†æ‰§è¡Œå‡½æ•°ä½“å†…åé¢çš„è¯­å¥ã€‚å¯ä»¥ç†è§£ä¸ºï¼Œæ˜¯è®©å‡ºäº†çº¿ç¨‹ï¼Œè·³å‡ºäº† async å‡½æ•°ä½“ã€‚</p><h3 id="æœ€åçœ‹çœ‹-babel-es8-ç¼–è¯‘-asyncawait-çš„ç»“æœ"><a aria-hidden="true" tabindex="-1" href="/basic/day#æœ€åçœ‹çœ‹-babel-es8-ç¼–è¯‘-asyncawait-çš„ç»“æœ"><span class="icon icon-link"></span></a>æœ€åçœ‹çœ‹ babel es8 ç¼–è¯‘ async/await çš„ç»“æœ</h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">asyncTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> ret </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow">await</span><span class="token plain"> </span><span class="token function">asyncFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>è½¬åŒ–ä¸º</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span><span class="token parameter">gen</span><span class="token parameter punctuation">,</span><span class="token parameter"> resolve</span><span class="token parameter punctuation">,</span><span class="token parameter"> reject</span><span class="token parameter punctuation">,</span><span class="token parameter"> _next</span><span class="token parameter punctuation">,</span><span class="token parameter"> _throw</span><span class="token parameter punctuation">,</span><span class="token parameter"> key</span><span class="token parameter punctuation">,</span><span class="token parameter"> arg</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">try</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> info </span><span class="token operator">=</span><span class="token plain"> gen</span><span class="token punctuation">[</span><span class="token plain">key</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> value </span><span class="token operator">=</span><span class="token plain"> info</span><span class="token punctuation">.</span><span class="token property-access">value</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">catch</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">error</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token plain">error</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">info</span><span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token plain">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token known-class-name class-name">Promise</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">value</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">then</span><span class="token punctuation">(</span><span class="token plain">_next</span><span class="token punctuation">,</span><span class="token plain"> _throw</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span><span class="token parameter">fn</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> self </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args </span><span class="token operator">=</span><span class="token plain"> arguments</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">resolve</span><span class="token parameter punctuation">,</span><span class="token parameter"> reject</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> gen </span><span class="token operator">=</span><span class="token plain"> fn</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain">self</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">_next</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span><span class="token plain">gen</span><span class="token punctuation">,</span><span class="token plain"> resolve</span><span class="token punctuation">,</span><span class="token plain"> reject</span><span class="token punctuation">,</span><span class="token plain"> _next</span><span class="token punctuation">,</span><span class="token plain"> _throw</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;next&#x27;</span><span class="token punctuation">,</span><span class="token plain"> value</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">_throw</span><span class="token punctuation">(</span><span class="token parameter">err</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function">asyncGeneratorStep</span><span class="token punctuation">(</span><span class="token plain">gen</span><span class="token punctuation">,</span><span class="token plain"> resolve</span><span class="token punctuation">,</span><span class="token plain"> reject</span><span class="token punctuation">,</span><span class="token plain"> _next</span><span class="token punctuation">,</span><span class="token plain"> _throw</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;throw&#x27;</span><span class="token punctuation">,</span><span class="token plain"> err</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">_next</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">asyncTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> _asyncTest</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token plain"> arguments</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">_asyncTest</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  _asyncTest </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">_asyncToGenerator</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token operator">*</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> ret </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword control-flow">yield</span><span class="token plain"> </span><span class="token function">asyncFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> _asyncTest</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span><span class="token plain"> arguments</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="call-å’Œ-apply-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›"><a aria-hidden="true" tabindex="-1" href="/basic/day#call-å’Œ-apply-çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›"><span class="icon icon-link"></span></a>call å’Œ apply çš„åŒºåˆ«æ˜¯ä»€ä¹ˆï¼Œå“ªä¸ªæ€§èƒ½æ›´å¥½ä¸€äº›</h2><ol><li>Function.prototype.apply å’Œ Function.prototype.call çš„ä½œç”¨æ˜¯ä¸€æ ·çš„ï¼ŒåŒºåˆ«åœ¨äºä¼ å…¥å‚æ•°çš„ä¸åŒï¼›</li><li>ç¬¬ä¸€ä¸ªå‚æ•°éƒ½æ˜¯ï¼ŒæŒ‡å®šå‡½æ•°ä½“å†… this çš„æŒ‡å‘ï¼›</li><li>ç¬¬äºŒä¸ªå‚æ•°ä¸åŒï¼Œapply æ˜¯ä¼ å…¥å¸¦ä¸‹æ ‡çš„é›†åˆï¼Œæ•°ç»„æˆ–è€…ç±»æ•°ç»„ï¼Œapply æŠŠå®ƒä¼ ç»™å‡½æ•°ä½œä¸ºå‚æ•°ã€‚call ä»ç¬¬äºŒä¸ªå¼€å§‹ä¼ å…¥çš„å‚æ•°æ˜¯ä¸å›ºå®šçš„ï¼Œéƒ½ä¼šä¼ ç»™å‡½æ•°ä½œä¸ºå‚æ•°ã€‚</li><li>call æ¯” apply çš„æ€§èƒ½è¦å¥½ï¼Œå¹³å¸¸å¯ä»¥å¤šç”¨ call, call ä¼ å…¥å‚æ•°çš„æ ¼å¼æ­£æ˜¯å†…éƒ¨æ‰€éœ€è¦çš„æ ¼å¼</li></ol><h2 id="ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯-1x1-åƒç´ çš„é€æ˜-gif-å›¾ç‰‡ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯-1x1-åƒç´ çš„é€æ˜-gif-å›¾ç‰‡ï¼Ÿ"><span class="icon icon-link"></span></a>ä¸ºä»€ä¹ˆé€šå¸¸åœ¨å‘é€æ•°æ®åŸ‹ç‚¹è¯·æ±‚çš„æ—¶å€™ä½¿ç”¨çš„æ˜¯ 1x1 åƒç´ çš„é€æ˜ gif å›¾ç‰‡ï¼Ÿ</h2><ol><li>è·¨åŸŸå‹å¥½æ”¯æŒï¼Œæ‰§è¡Œè¿‡ç¨‹æ— é˜»å¡</li><li>æ‰§è¡Œè¿‡ç¨‹æ— é˜»å¡</li><li>åˆ©ç”¨ç©ºç™½ gif æˆ– 1x1 px çš„ img æ˜¯äº’è”ç½‘å¹¿å‘Šæˆ–ç½‘ç«™ç›‘æµ‹æ–¹é¢å¸¸ç”¨çš„æ‰‹æ®µï¼Œç®€å•ã€å®‰å…¨ã€ç›¸æ¯” PNG/JPG ä½“ç§¯å°ï¼Œ1px é€æ˜å›¾ï¼Œå¯¹ç½‘é¡µå†…å®¹çš„å½±å“å‡ ä¹æ²¡æœ‰å½±å“ï¼Œè¿™ç§è¯·æ±‚ç”¨åœ¨å¾ˆå¤šåœ°æ–¹ï¼Œæ¯”å¦‚æµè§ˆã€ç‚¹å‡»ã€çƒ­ç‚¹ã€å¿ƒè·³ã€ID é¢å‘ç­‰ç­‰</li><li>è§¦å‘ GET è¯·æ±‚ä¹‹åä¸éœ€è¦è·å–å’Œå¤„ç†æ•°æ®ã€æœåŠ¡å™¨ä¹Ÿä¸éœ€è¦å‘é€æ•°æ®</li><li>å›¾ç‰‡è¯·æ±‚ä¸å ç”¨ Ajax è¯·æ±‚é™é¢</li><li>GIF çš„æœ€ä½åˆæ³•ä½“ç§¯æœ€å°ï¼ˆæœ€å°çš„ BMP æ–‡ä»¶éœ€è¦ 74 ä¸ªå­—èŠ‚ï¼ŒPNG éœ€è¦ 67 ä¸ªå­—èŠ‚ï¼Œè€Œåˆæ³•çš„ GIFï¼Œåªéœ€è¦ 43 ä¸ªå­—èŠ‚ï¼‰</li></ol><h2 id="è¦æ±‚è®¾è®¡-lazyman-ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¦æ±‚è®¾è®¡-lazyman-ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½"><span class="icon icon-link"></span></a>è¦æ±‚è®¾è®¡ LazyMan ç±»ï¼Œå®ç°ä»¥ä¸‹åŠŸèƒ½</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function maybe-class-name">LazyMan</span><span class="token punctuation">(</span><span class="token string">&#x27;Tony&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Hi I am Tony</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function maybe-class-name">LazyMan</span><span class="token punctuation">(</span><span class="token string">&#x27;Tony&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;lunch&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Hi I am Tony</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç­‰å¾…äº†10ç§’...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating lunch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function maybe-class-name">LazyMan</span><span class="token punctuation">(</span><span class="token string">&#x27;Tony&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;lunch&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;dinner&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Hi I am Tony</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating lunch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç­‰å¾…äº†10ç§’...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating diner</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token function maybe-class-name">LazyMan</span><span class="token punctuation">(</span><span class="token string">&#x27;Tony&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;lunch&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;dinner&#x27;</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">sleepFirst</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">sleep</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">.</span><span class="token method function property-access">eat</span><span class="token punctuation">(</span><span class="token string">&#x27;junk food&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Hi I am Tony</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç­‰å¾…äº†5ç§’...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating lunch</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating dinner</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// ç­‰å¾…äº†10ç§’...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// I am eating junk food</span></div></pre></div><h3 id="åˆ†æ"><a aria-hidden="true" tabindex="-1" href="/basic/day#åˆ†æ"><span class="icon icon-link"></span></a>åˆ†æ</h3><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„èŒè´£é“¾è°ƒç”¨é—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿‡ <code>jQuery</code> åº”è¯¥ä¸ä¼šé™Œç”Ÿé“¾å¼è°ƒç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬å‘ç°ç°åœ¨åŠŸèƒ½ä¸­æ·»åŠ äº†å¼‚æ­¥æ“ä½œï¼Œæˆ‘ä»¬å¯ä»¥å°†éœ€è¦è°ƒç”¨çš„å†…å®¹å­˜å…¥é˜Ÿåˆ—ï¼Œç„¶åé€æ­¥è°ƒç”¨ã€‚</p><h3 id="ä»£ç "><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»£ç "><span class="icon icon-link"></span></a>ä»£ç </h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">LazyManClass</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> name</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">queue</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Hi I am </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">name</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">sleepFirst</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">fn</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">ç­‰å¾…äº†</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">time</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">ç§’...</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> time</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">queue</span><span class="token punctuation">.</span><span class="token method function property-access">unshift</span><span class="token punctuation">(</span><span class="token plain">fn</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">sleep</span><span class="token punctuation">(</span><span class="token parameter">time</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">fn</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">ç­‰å¾…äº†</span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">time</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string string">ç§’...</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> time</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">queue</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain">fn</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">eat</span><span class="token punctuation">(</span><span class="token parameter">food</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">fn</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">I am eating </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">food</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">queue</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain">fn</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> fn </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">queue</span><span class="token punctuation">.</span><span class="token method function property-access">shift</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    fn </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">LazyMan</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">LazyManClass</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯·å®ç°ä¸€ä¸ª-add-å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚"><span class="icon icon-link"></span></a>è¯·å®ç°ä¸€ä¸ª add å‡½æ•°ï¼Œæ»¡è¶³ä»¥ä¸‹åŠŸèƒ½ã€‚</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> 	</span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">  	</span><span class="token comment">// 3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token plain">ï¼›  </span><span class="token comment">// 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// 6</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain">   </span><span class="token comment">// 6</span></div></pre></div><h3 id="åˆ†æ-1"><a aria-hidden="true" tabindex="-1" href="/basic/day#åˆ†æ-1"><span class="icon icon-link"></span></a>åˆ†æ</h3><p>è¿™æ˜¯ä¸€ä¸ªå¾ˆå…¸å‹çš„å‡½æ•°æŸ¯é‡ŒåŒ–é—®é¢˜ï¼Œä½¿ç”¨åœºæ™¯å¾ˆå¤šï¼Œæ¯”å¦‚æƒ°æ€§æ±‚å€¼ã€å‡½æ•° bind å®ç°ç­‰ï¼Œç†è§£è¿™ä¸ªé—®é¢˜èƒ½å¤Ÿè®©æˆ‘ä»¬æ›´æ‡‚é—­åŒ…é—®é¢˜ï¼Œæœ¬é¢˜è§£æ³•æ ¸å¿ƒå…¶å®å°±æ˜¯è¿ç”¨é—­åŒ…æš‚å­˜å‚æ•°ï¼Œå¾…åˆ°æ‰§è¡Œæ—¶æœºï¼Œæ‰§è¡Œå‡½æ•°ã€‚</p><h3 id="ä»£ç -1"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»£ç -1"><span class="icon icon-link"></span></a>ä»£ç </h3><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> currying </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fn</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token comment">// 1</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token plain">judge </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token spread operator">...</span><span class="token plain">args </span><span class="token comment">// 2</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    args</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">&gt;=</span><span class="token plain"> fn</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token comment">// 3</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">?</span><span class="token plain"> </span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token plain">args</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// 4</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter operator">...</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token function">judge</span><span class="token punctuation">(</span><span class="token spread operator">...</span><span class="token plain">args</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token spread operator">...</span><span class="token plain">arg</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// 5</span></div></pre></div><ol><li>å®šä¹‰æŸ¯é‡ŒåŒ–å‡½æ•°ï¼Œæ¯”å¦‚æˆ‘ä»¬æƒ³å°† <code>sum</code> å‡½æ•°æŸ¯é‡ŒåŒ–ä¸ºå¦‚é¢˜ <code>add</code> å‡½æ•°ï¼Œç¬¬ä¸€æ­¥ä¼ å…¥çš„ <code>fn</code> å‚æ•°å³ä¸º <code>add</code></li><li>å®šä¹‰ä¸€ä¸ªåˆ¤æ–­å‡½æ•°ï¼Œåˆ¤æ–­æˆ‘ä»¬å½“å‰æ˜¯å¦æ»¡è¶³è°ƒç”¨æ¡ä»¶</li><li>å½“æ”¶é›†åˆ°çš„å‚æ•°ç­‰äºä¼ å…¥å‚æ•°ï¼Œåˆ™æ‰§è¡Œç¬¬ 4 æ­¥ï¼Œå¦åˆ™æ‰§è¡Œç¬¬ 5 æ­¥</li><li>è°ƒç”¨ <code>fn</code> ï¼Œå¹¶ä¼ å…¥æ”¶é›†çš„å‚æ•°</li><li>ç»§ç»­æ”¶é›†å‚æ•°</li></ol><h2 id="è¯´è¯´-https-åŸç†åŠæ¡æ‰‹è¿‡ç¨‹"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯´è¯´-https-åŸç†åŠæ¡æ‰‹è¿‡ç¨‹"><span class="icon icon-link"></span></a>è¯´è¯´ HTTPS åŸç†åŠæ¡æ‰‹è¿‡ç¨‹</h2><p><strong>æ¦‚å¿µ</strong></p><p>HTTP æ˜¯è¿è¡Œåœ¨ TCP å±‚ä¹‹ä¸Šçš„ï¼Œè€Œ HTTPS åˆ™æ˜¯åœ¨ HTTP å’Œ TCP å±‚ç›´æ¥å¤šåŠ äº†ä¸€ä¸ª SSL/TSL å±‚ï¼ŒSSL å±‚å‘ä¸Šæä¾›åŠ å¯†å’Œè§£å¯†çš„æœåŠ¡ï¼Œå¯¹ HTTP æ¥è¯´æ˜¯é€æ˜çš„ã€‚</p><p><strong>å¯¹ç§°åŠ å¯†ä¸éå¯¹ç§°åŠ å¯†</strong></p><p>åŠ å¯†å’Œè§£å¯†éƒ½ä½¿ç”¨åŒä¸€ç§ç®—æ³•çš„åŠ å¯†æ–¹æ³•ï¼Œç§°ä¹‹ä¸º<strong>å¯¹ç§°åŠ å¯†</strong>ã€‚åŠ å¯†å’Œè§£å¯†ä½¿ç”¨ä¸åŒçš„ç®—æ³•ï¼Œç§°ä¸º<strong>éå¯¹ç§°åŠ å¯†</strong>ã€‚</p><p>å¯¹ç§°åŠ å¯†éœ€è¦ä¸€æŠŠé’¥åŒ™å°±å¤Ÿäº†ï¼Œéå¯¹ç§°åŠ å¯†ç®—æ³•éœ€è¦ä¸¤æŠŠé’¥åŒ™â€”â€”å…¬é’¥å’Œç§é’¥ã€‚ç”¨å…¬é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç›¸åº”çš„ç§é’¥è§£å¼€ï¼Œç”¨ç§é’¥åŠ å¯†çš„å¯†æ–‡åªèƒ½ç”¨ç›¸åº”çš„å…¬é’¥è§£å¼€ã€‚å…¶ä¸­ï¼Œå…¬é’¥æ˜¯å…¬å¼€çš„ï¼Œç§é’¥æ˜¯ä¸å¯¹å¤–å…¬å¼€çš„ã€‚</p><p>ä¸¤è€…çš„ä¸»è¦åŒºåˆ«åœ¨äºå¯†é’¥çš„é•¿åº¦ä¸åŒï¼Œé•¿åº¦è¶Šé•¿ï¼Œç›¸åº”çš„åŠ /è§£å¯†èŠ±è´¹çš„æ—¶é—´å°±ä¼šæ›´é•¿ï¼Œå¯¹ç§°åŠ å¯†ä½¿ç”¨çš„å¯†é’¥é•¿åº¦ä¼šçŸ­ä¸€äº›ã€‚</p><p>SSL ç»“åˆäº†è¿™ä¸¤ç§åŠ å¯†ç®—æ³•çš„ä¼˜ç‚¹ã€‚åˆ©ç”¨<strong>éå¯¹ç§°åŠ å¯†</strong>ç®—æ³•æ¥åå•†ç”Ÿæˆå¯¹ç§°åŠ å¯†çš„å¯†é’¥ï¼Œç„¶åä¹‹åå°±ç”¨<strong>å¯¹ç§°åŠ å¯†</strong>æ¥è¿›è¡Œé€šä¿¡ã€‚</p><h3 id="client----server"><a aria-hidden="true" tabindex="-1" href="/basic/day#client----server"><span class="icon icon-link"></span></a>client --&gt; server</h3><p><strong>Client Hello</strong></p><p>æ¡æ‰‹å¼€å§‹æ—¶ï¼Œæ€»æ˜¯ä¼˜å…ˆå®¢æˆ·ç«¯ä¼šå‘é€ <code>Client Hello</code> ä¿¡æ¯ç»™æœåŠ¡ç«¯ï¼Œä¸»è¦åŒ…å«</p><ul><li>Version Number</li></ul><p>å®¢æˆ·ç«¯æ”¯æŒçš„åè®®ç‰ˆæœ¬</p><ul><li><p>Randomly Generated Data</p><p>32 å­—èŠ‚é•¿åº¦çš„éšæœºå€¼ï¼Œç”¨äºä¹‹åç”Ÿæˆä¸»å¯†é’¥ã€‚</p></li></ul><ul><li><p>Session Identification</p><p>Session IDï¼Œç¬¬ä¸€æ¬¡è¿æ¥æ—¶ä¸ºç©ºã€‚</p></li></ul><ul><li><p>Cipher Suite</p><p>å®¢æˆ·ç«¯æ”¯æŒçš„åŠ å¯†ç®—æ³•åˆ—è¡¨ï¼ŒæŒ‰ä¼˜å…ˆçº§é¡ºåºæ’åˆ—ã€‚</p></li></ul><h3 id="server----client"><a aria-hidden="true" tabindex="-1" href="/basic/day#server----client"><span class="icon icon-link"></span></a>server --&gt; client</h3><p><strong>Server Hello</strong></p><p>æ¥ç€ï¼ŒæœåŠ¡ç«¯æ”¶åˆ°å®¢æˆ·ç«¯å‘æ¥çš„æ¶ˆæ¯ä¹‹åï¼Œä¼šè¿”å› <code>Server Hello</code> ä¿¡æ¯ç»™å®¢æˆ·ç«¯ï¼Œå‘ŠçŸ¥å®¢æˆ·ç«¯æ¥ä¸‹æ¥ä½¿ç”¨çš„ä¸€äº›å‚æ•°</p><ul><li><p>Version Number</p><p>é€šä¿¡åè®®ç‰ˆæœ¬</p></li></ul><ul><li><p>Randomly Generated Data</p><p>32 å­—èŠ‚é•¿åº¦çš„éšæœºå€¼ï¼Œç”¨äºä¹‹åç”Ÿæˆä¸»å¯†é’¥</p></li></ul><ul><li><p>Session Identification</p><p>Session ID</p></li></ul><ul><li><p>Cipher Suite</p><p>åŠ å¯†ç®—æ³•</p></li></ul><p><strong>Server Certificate</strong></p><p>æœåŠ¡ç«¯è¿˜ä¼šå¸¦ä¸Šè¯ä¹¦è¿”å›ç»™å®¢æˆ·ç«¯ã€‚è¯ä¹¦ä¸­å«æœ‰æœåŠ¡ç«¯çš„å…¬é’¥ã€ç½‘ç«™åœ°å€ã€è¯ä¹¦çš„é¢å‘æœºæ„ç­‰ä¿¡æ¯ã€‚</p><p>å®¢æˆ·ç«¯æ”¶åˆ°æœåŠ¡ç«¯è¿”å›çš„è¯ä¹¦ä¹‹åï¼Œä¼šéªŒè¯è¯¥è¯ä¹¦çš„çœŸå®åˆæ³•æ€§ã€‚</p><p><strong>Server Key Exchange</strong></p><p>è¿™ä¸ªæ˜¯å¯é€‰çš„ï¼Œå–å†³äºä½¿ç”¨çš„åŠ å¯†ç®—æ³•ã€‚ä¸»è¦æ˜¯æºå¸¦å¯†é’¥äº¤æ¢çš„é¢å¤–æ•°æ®ã€‚</p><p><strong>Server Hello Done</strong></p><p>è¡¨ç¤ºæœåŠ¡ç«¯å·²ç»å‘é€å®Œæ¯•ï¼Œå¹¶ç­‰å¾…å®¢æˆ·ç«¯å›åº”ã€‚</p><h3 id="client----server-1"><a aria-hidden="true" tabindex="-1" href="/basic/day#client----server-1"><span class="icon icon-link"></span></a>client --&gt; server</h3><p><strong>Client Key Exchange</strong></p><p>å®¢æˆ·ç«¯ä½¿ç”¨ä¹‹å‰å‘é€ç»™æœåŠ¡ç«¯åŠæœåŠ¡ç«¯è¿”å›çš„éšæœºæ•°ï¼Œç”Ÿæˆé¢„ä¸»å¯†é’¥ï¼Œç„¶åç”¨æœåŠ¡ç«¯è¿”å›çš„å…¬é’¥è¿›è¡ŒåŠ å¯†ã€‚</p><p><strong>Change Cipher Spec</strong></p><p>å‘Šè¯‰æœåŠ¡ç«¯ï¼Œä¹‹åçš„æ‰€æœ‰ä¿¡æ¯éƒ½ä¼šä½¿ç”¨åå•†å¥½çš„å¯†é’¥å’Œç®—æ³•åŠ å¯†</p><p><strong>Client Finished</strong></p><p>å®¢æˆ·ç«¯çš„æ¡æ‰‹å·¥ä½œå·²ç»å®Œæˆã€‚è¿™æ¡ä¿¡æ¯æ˜¯æ¡æ‰‹è¿‡ç¨‹ä¸­æ‰€æœ‰æ¶ˆæ¯çš„æ•£åˆ—å€¼ã€‚</p><h3 id="server----client-1"><a aria-hidden="true" tabindex="-1" href="/basic/day#server----client-1"><span class="icon icon-link"></span></a>server --&gt; client</h3><p><strong>Change Cipher Spec Message</strong></p><p>å‘ŠçŸ¥å®¢æˆ·ç«¯ï¼Œä¼šä½¿ç”¨åˆšåˆšåå•†çš„å¯†é’¥æ¥åŠ å¯†ä¿¡æ¯</p><p><strong>Server Finished Message</strong></p><p>è¡¨ç¤ºæœåŠ¡ç«¯çš„æ¡æ‰‹å·¥ä½œå·²ç»å®Œæˆ</p><p><img src="http://walker-markdown.oss-cn-shenzhen.aliyuncs.com/uPic/6rF9hx.jpg" alt="6rF9hx"/></p><h2 id="ã€ç™¾åº¦ã€‘å®ç°-5add3minus2-åŠŸèƒ½ã€‚"><a aria-hidden="true" tabindex="-1" href="/basic/day#ã€ç™¾åº¦ã€‘å®ç°-5add3minus2-åŠŸèƒ½ã€‚"><span class="icon icon-link"></span></a>ã€ç™¾åº¦ã€‘å®ç° (5).add(3).minus(2) åŠŸèƒ½ã€‚</h2><p><strong>æ¦‚å¿µ</strong></p><p>è€ƒå¯Ÿæ•°å­—å¯¹è±¡åŸå‹æ‹“å±•</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Number</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">add</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Number</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">minus</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">valueOf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> n</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="è®©ä¸€ä¸ª-div-æ°´å¹³å‚ç›´å±…ä¸­"><a aria-hidden="true" tabindex="-1" href="/basic/day#è®©ä¸€ä¸ª-div-æ°´å¹³å‚ç›´å±…ä¸­"><span class="icon icon-link"></span></a>è®©ä¸€ä¸ª div æ°´å¹³å‚ç›´å±…ä¸­</h2><p><strong><code>flex</code> å¸ƒå±€</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector">div</span><span class="token selector class">.parent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> flex</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">justify-content</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">align-items</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>å®šä½</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector">div</span><span class="token selector class">.parent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">position</span><span class="token punctuation">:</span><span class="token plain"> relative</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">position</span><span class="token punctuation">:</span><span class="token plain"> absolute</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">top</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">left</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">transform</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token number">-50</span><span class="token unit">%</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">-50</span><span class="token unit">%</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">/* æˆ–è€… */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">height</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">position</span><span class="token punctuation">:</span><span class="token plain"> absolute</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">top</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">left</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">margin-left</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">-25</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">margin-top</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">-5</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">/* æˆ– */</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">50</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">height</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token unit">px</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">position</span><span class="token punctuation">:</span><span class="token plain"> absolute</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">left</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">top</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">right</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">bottom</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">margin</span><span class="token punctuation">:</span><span class="token plain"> auto</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>grid å¸ƒå±€</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector">div</span><span class="token selector class">.parent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> grid</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">justify-self</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">align-self</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>Inline-block</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector">div</span><span class="token selector class">.parent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">font-size</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">text-align</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token selector">;</span></div><div class="token-line"><span class="token selector">  &amp;</span><span class="token selector pseudo-element">::before</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">content</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> inline-block</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">height</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">100</span><span class="token unit">%</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token property">vertical-align</span><span class="token punctuation">:</span><span class="token plain"> middle</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> inline-block</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">vertical-align</span><span class="token punctuation">:</span><span class="token plain"> middle</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>table</strong></p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token selector">div</span><span class="token selector class">.parent</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> table</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token selector">div</span><span class="token selector class">.child</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation">:</span><span class="token plain"> table-cell</span></div><div class="token-line"><span class="token plain">  </span><span class="token property">vertical-align</span><span class="token punctuation">:</span><span class="token plain"> middle</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token property">text-align</span><span class="token punctuation">:</span><span class="token plain"> center</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«"><a aria-hidden="true" tabindex="-1" href="/basic/day#ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«"><span class="icon icon-link"></span></a>ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ï¼ˆfunctionï¼‰çš„åŒºåˆ«</h2><p>å¼•å…¥ç®­å¤´å‡½æ•°æœ‰ä¸¤ä¸ªæ–¹é¢çš„ä½œç”¨ï¼šæ›´ç®€çŸ­çš„å‡½æ•°å¹¶ä¸”ä¸ç»‘å®š thisã€‚ç®­å¤´å‡½æ•°ä¸æ™®é€šå‡½æ•°ä¸åŒä¹‹å¤„æœ‰ï¼š</p><ol><li>ç®­å¤´å‡½æ•°æ²¡æœ‰ thisï¼Œå®ƒä¼šä»è‡ªå·±çš„ä½œç”¨åŸŸé“¾çš„ä¸Šä¸€å±‚ç»§æ‰¿ thisï¼ˆå› æ­¤æ— æ³•ä½¿ç”¨ apply / call / bind è¿›è¡Œç»‘å®š this å€¼ï¼‰ï¼›</li><li>ä¸ç»‘å®š argumentsï¼Œå½“åœ¨ç®­å¤´å‡½æ•°ä¸­è°ƒç”¨ aruguments æ—¶åŒæ ·ä¼šå‘ä½œç”¨åŸŸé“¾ä¸­æŸ¥è¯¢ç»“æœï¼›</li><li>ä¸ç»‘å®š super å’Œ new.targetï¼›</li><li>æ²¡æœ‰ prototype å±æ€§ï¼Œå³æŒ‡å‘ undefinedï¼›</li><li>æ— æ³•ä½¿ç”¨ new å®ä¾‹åŒ–å¯¹è±¡ï¼Œå› ä¸ºæ™®é€šæ„é€ å‡½æ•°é€šè¿‡ new å®ä¾‹åŒ–å¯¹è±¡æ—¶ this æŒ‡å‘å®ä¾‹å¯¹è±¡ï¼Œè€Œç®­å¤´å‡½æ•°æ²¡æœ‰ this å€¼ï¼ŒåŒæ—¶ç®­å¤´å‡½æ•°ä¹Ÿæ²¡æœ‰ prototypeã€‚</li></ol><p>å¦å¤–æä¸€ç‚¹ï¼Œåœ¨ä½¿ç”¨ <code>React</code> ã€<code>Vue</code>ç›¸å…³æ¡†æ¶æ—¶ï¼Œè¦æ³¨æ„ï¼Œç”Ÿå‘½å‘¨æœŸå‡½æ•°ä½¿ç”¨ç®­å¤´å‡½æ•°ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚</p><h2 id="redux-çš„-reducer-ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ"><a aria-hidden="true" tabindex="-1" href="/basic/day#redux-çš„-reducer-ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ"><span class="icon icon-link"></span></a>Redux çš„ reducer ä¸ºä»€ä¹ˆä¸èƒ½æœ‰å‰¯ä½œç”¨çš„æ“ä½œ</h2><p>Redux çš„è®¾è®¡å‚è€ƒäº† Flux çš„æ¨¡å¼ï¼Œä½œè€…å¸Œæœ›ä»¥æ­¤æ¥å®ç°æ—¶é—´æ—…è¡Œï¼Œä¿å­˜åº”ç”¨çš„å†å²çŠ¶æ€ï¼Œå®ç°åº”ç”¨çŠ¶æ€çš„å¯é¢„æµ‹ã€‚æ‰€ä»¥æ•´ä¸ª Redux éƒ½æ˜¯å‡½æ•°å¼ç¼–ç¨‹çš„èŒƒå¼ï¼Œè¦æ±‚<code>reducer</code> æ˜¯<strong>çº¯å‡½æ•°</strong>ä¹Ÿæ˜¯è‡ªç„¶è€Œç„¶çš„äº‹æƒ…ï¼Œä½¿ç”¨çº¯å‡½æ•°æ‰èƒ½ä¿è¯ç›¸åŒçš„è¾“å…¥å¾—åˆ°ç›¸åŒçš„è¾“å…¥ï¼Œä¿è¯çŠ¶æ€çš„å¯é¢„æµ‹ã€‚æ‰€ä»¥ Redux æœ‰ä¸‰å¤§åŸåˆ™ï¼š</p><ul><li>å•ä¸€æ•°æ®æº state</li><li>state åªè¯»ï¼ŒRedux æ²¡æœ‰æš´éœ²å‡ºç›´æ¥ä¿®æ”¹ state çš„æ¥å£ï¼Œå¿…é¡»é€šè¿‡ action æ¥è§¦å‘ä¿®æ”¹</li><li>ä½¿ç”¨çº¯å‡½æ•°æ¥ä¿®æ”¹ stateï¼Œreducer å¿…é¡»æ˜¯çº¯å‡½æ•°</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">currentState = currentReducer(currentState, action)</span></div></pre></div><p><code>currentReducer</code> å°±æ˜¯æˆ‘ä»¬åœ¨ <code>createStore</code> ä¸­ä¼ å…¥çš„ <code>reducer</code>ï¼Œ<code>reducer</code> ç”¨æ¥è®¡ç®— state çš„ï¼Œæ‰€ä»¥å®ƒçš„è¿”å›å€¼å¿…é¡»æ˜¯ <code>state</code> ï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ•´ä¸ªåº”ç”¨çš„çŠ¶æ€ï¼Œè€Œä¸èƒ½æ˜¯ <code>promise</code>ä¹‹ç±»çš„ã€‚</p><p>è¦åœ¨ reducer ä¸­åŠ å…¥å¼‚æ­¥çš„æ“ä½œï¼Œå¦‚æœä½ åªæ˜¯å•çº¯æƒ³æ‰§è¡Œå¼‚æ­¥æ“ä½œï¼Œä¸ä¼šç­‰å¾…å¼‚æ­¥çš„è¿”å›ï¼Œé‚£ä¹ˆåœ¨ reducer ä¸­æ‰§è¡Œçš„æ„ä¹‰æ˜¯ä»€ä¹ˆã€‚å¦‚æœæƒ³æŠŠå¼‚æ­¥æ“ä½œçš„ç»“æœååº”åœ¨ state ä¸­ï¼Œé¦–å…ˆæ•´ä¸ªåº”ç”¨çš„çŠ¶æ€å°†å˜çš„ä¸å¯é¢„æµ‹ï¼Œè¿èƒŒ Redux çš„è®¾è®¡åŸåˆ™ï¼Œå…¶æ¬¡ï¼Œæ­¤æ—¶çš„ currentState å°†ä¼šæ˜¯ promise ä¹‹ç±»è€Œä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„åº”ç”¨çŠ¶æ€ï¼Œæ ¹æœ¬æ˜¯è¡Œä¸é€šçš„ã€‚</p><h2 id="ä»‹ç»ä¸‹-bfc-åŠå…¶åº”ç”¨"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»‹ç»ä¸‹-bfc-åŠå…¶åº”ç”¨"><span class="icon icon-link"></span></a>ä»‹ç»ä¸‹ BFC åŠå…¶åº”ç”¨</h2><p>BFC ï¼ˆblock format contextï¼‰å°±æ˜¯å—çº§æ ¼å¼ä¸Šä¸‹æ–‡ï¼Œæ˜¯é¡µé¢ç›’æ¨¡å‹å¸ƒå±€ä¸­çš„ä¸€ç§ CSS æ¸²æŸ“æ¨¡å¼ï¼Œç›¸å½“äºä¸€ä¸ªç‹¬ç«‹çš„å®¹å™¨ï¼Œé‡Œé¢çš„å…ƒç´ å’Œå¤–éƒ¨çš„å…ƒç´ ç›¸äº’ä¸å½±å“</p><p><strong>åˆ›å»º BFC çš„æ–¹å¼</strong></p><ol><li>html æ ¹å…ƒç´ </li><li>float æµ®åŠ¨</li><li>ç»å¯¹å®šä½</li><li>overflow ä¸ä¸º visiable</li><li>display ä¸ºè¡¨æ ¼å¸ƒå±€æˆ–è€…å¼¹æ€§å¸ƒå±€</li><li>è¡Œå†…å—å…ƒç´ ã€ç½‘æ ¼å¸ƒå±€ã€contain å€¼ä¸º layoutã€content æˆ– strict çš„å…ƒç´ </li></ol><p><strong>BFC çš„ç‰¹æ€§</strong></p><ol><li>å†…éƒ¨ box ä¼šåœ¨å‚ç›´æ–¹å‘ï¼Œä¸€ä¸ªæ¥ä¸€ä¸ªåœ°æ”¾ç½®ã€‚</li><li>Box å‚ç›´æ–¹å‘çš„è·ç¦»ç”± margin å†³å®šï¼Œåœ¨ä¸€ä¸ª BFC ä¸­ï¼Œä¸¤ä¸ªç›¸é‚»çš„å—çº§ç›’å­çš„å‚ç›´å¤–è¾¹è·ä¼šäº§ç”ŸæŠ˜å ã€‚</li><li>åœ¨ BFC ä¸­ï¼Œæ¯ä¸€ä¸ªç›’å­çš„å·¦å¤–è¾¹ç¼˜ï¼ˆmargin-leftï¼‰ä¼šè§¦ç¢°åˆ°å®¹å™¨çš„å·¦è¾¹ç¼˜(border-left)ï¼ˆå¯¹äºä»å³åˆ°å·¦çš„æ ¼å¼æ¥è¯´ï¼Œåˆ™è§¦ç¢°åˆ°å³è¾¹ç¼˜ï¼‰</li><li>å½¢æˆäº† BFC çš„åŒºåŸŸä¸ä¼šä¸ float box é‡å </li><li>è®¡ç®— BFC é«˜åº¦æ—¶ï¼Œæµ®åŠ¨å…ƒç´ ä¹Ÿå‚ä¸è®¡ç®—</li></ol><h2 id="å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º-300px-ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º-300px-ï¼Ÿ"><span class="icon icon-link"></span></a>å¦‚ä¸‹ä»£ç ï¼Œå¦‚ä½•ä¿®æ”¹èƒ½è®©å›¾ç‰‡å®½åº¦ä¸º 300px ï¼Ÿ</h2><div class="__dumi-default-code-block"><pre class="prism-code language-html"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">&lt;img src=&quot;1.jpg&quot; style=&quot;width:480px!important;â€&gt;</span></div></pre></div><p>è®¾æœ€å¤§å®½åº¦</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token property">max-width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">300</span><span class="token unit">px</span><span class="token punctuation">;</span></div></pre></div><p>è¿ç”¨è½¬æ¢</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token property">transform</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">0.625</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">0.625</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>box-sizing è®¾ç½®</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token property">box-sizing</span><span class="token punctuation">:</span><span class="token plain"> border-box</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token property">padding</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token number">90</span><span class="token unit">px</span><span class="token punctuation">;</span></div></pre></div><p>å½“ç„¶ï¼Œæ›´ç¡¬æ ¸çš„æœ‰ï¼ŒğŸ˜†</p><div class="__dumi-default-code-block"><pre class="prism-code language-css"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token property">width</span><span class="token punctuation">:</span><span class="token plain"> </span><span class="token number">300</span><span class="token unit">px</span><span class="token plain"> </span><span class="token important">!important</span><span class="token punctuation">;</span></div></pre></div><h2 id="æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º-0---9"><a aria-hidden="true" tabindex="-1" href="/basic/day#æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º-0---9"><span class="icon icon-link"></span></a>æ”¹é€ ä¸‹é¢çš„ä»£ç ï¼Œä½¿ä¹‹è¾“å‡º 0 - 9</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token parameter">i</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    i</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>åˆ†æ</strong></p><p>ä¸»è¦è€ƒå¯Ÿå¯¹äºå˜é‡ä½œç”¨åŸŸçš„ç†è§£ï¼Œè§£å†³å˜é‡ä½œç”¨åŸŸå³å¯ã€‚</p><p><strong>æ–¹æ³•ä¸€</strong></p><ul><li>åˆ©ç”¨ <code>setTimeout</code> å‡½æ•°çš„ç¬¬ä¸‰ä¸ªå‚æ•°ï¼Œä¼šä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥</li><li>åˆ©ç”¨ <code>bind</code> å‡½æ•°éƒ¨åˆ†æ‰§è¡Œçš„ç‰¹æ€§</li></ul><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token parameter">i</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    i</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>æˆ–è€…</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token property-access">log</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token plain"> i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>æˆ–è€…</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">.</span><span class="token method function property-access">bind</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">,</span><span class="token plain"> i</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>æ–¹æ³•äºŒ</strong></p><p>åˆ©ç”¨ <code>let</code> å˜é‡çš„ç‰¹æ€§ â€” åœ¨æ¯ä¸€æ¬¡ <code>for</code> å¾ªç¯çš„è¿‡ç¨‹ä¸­ï¼Œ<code>let</code> å£°æ˜çš„å˜é‡ä¼šåœ¨å½“å‰çš„å—çº§ä½œç”¨åŸŸé‡Œé¢ï¼ˆ<code>for</code> å¾ªç¯çš„ body ä½“ï¼Œä¹Ÿå³ä¸¤ä¸ªèŠ±æ‹¬å·ä¹‹é—´çš„å†…å®¹åŒºåŸŸï¼‰åˆ›å»ºä¸€ä¸ªæ–‡æ³•ç¯å¢ƒï¼ˆLexical Environmentï¼‰ï¼Œè¯¥ç¯å¢ƒé‡Œé¢åŒ…æ‹¬äº†å½“å‰ <code>for</code> å¾ªç¯è¿‡ç¨‹ä¸­çš„ <code>i</code>ï¼Œ</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">let</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>æ–¹æ³•ä¸‰</strong></p><p>åˆ©ç”¨å‡½æ•°è‡ªæ‰§è¡Œçš„æ–¹å¼ï¼ŒæŠŠå½“å‰ for å¾ªç¯è¿‡ç¨‹ä¸­çš„ i ä¼ é€’è¿›å»ï¼Œæ„å»ºå‡ºå—çº§ä½œç”¨åŸŸã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token parameter">i</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token plain">i</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p><strong>æ–¹æ³•å››</strong></p><p>çº¯å±å¨±ä¹ï¼Œåˆ©ç”¨ <code>new Function</code> æˆ–è€… <code>eval</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> </span><span class="token number">10</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&#x27;console.log(i)&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="ä»‹ç»ä¸‹-npm-æ¨¡å—å®‰è£…æœºåˆ¶"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»‹ç»ä¸‹-npm-æ¨¡å—å®‰è£…æœºåˆ¶"><span class="icon icon-link"></span></a>ä»‹ç»ä¸‹ npm æ¨¡å—å®‰è£…æœºåˆ¶</h2><h3 id="npm-æ¨¡å—å®‰è£…æœºåˆ¶ï¼š"><a aria-hidden="true" tabindex="-1" href="/basic/day#npm-æ¨¡å—å®‰è£…æœºåˆ¶ï¼š"><span class="icon icon-link"></span></a>npm æ¨¡å—å®‰è£…æœºåˆ¶ï¼š</h3><ul><li>æ•²å‡»<code>npm install</code>å‘½ä»¤</li><li>æŸ¥è¯¢ node_modules ç›®å½•ä¹‹ä¸­æ˜¯å¦å·²ç»å­˜åœ¨æŒ‡å®šæ¨¡å—<ul><li>è‹¥å­˜åœ¨ï¼Œä¸å†é‡æ–°å®‰è£…</li><li>è‹¥ä¸å­˜åœ¨<ul><li>npm å‘ registry æŸ¥è¯¢æ¨¡å—å‹ç¼©åŒ…çš„ç½‘å€</li><li>ä¸‹è½½å‹ç¼©åŒ…ï¼Œå­˜æ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„<code>.npm</code>ç›®å½•é‡Œ</li><li>è§£å‹å‹ç¼©åŒ…åˆ°å½“å‰é¡¹ç›®çš„<code>node_modules</code>ç›®å½•</li></ul></li></ul></li></ul><p><strong>æ‰§è¡Œ preinstall</strong></p><p>preinstall é’©å­æ­¤æ—¶ä¼šæ‰§è¡Œã€‚</p><p><strong>ç¡®å®šä¾èµ–æ¨¡å—</strong></p><p>ç¡®å®šå·¥ç¨‹ä¸­çš„é¦–å±‚ä¾èµ–â€”â€”dependencies å’Œ devDependencies ä¸­æŒ‡å®šçš„æ¨¡å—</p><p>ä»¥å·¥ç¨‹æœ¬èº«ä¸ºä¾èµ–æ ‘æ ¹èŠ‚ç‚¹ï¼Œæ­¤æ—¶ä¼šå¤šè¿›ç¨‹æ·±å…¥éå†èŠ‚ç‚¹</p><p><strong>è·å–æ¨¡å—</strong></p><ul><li>è·å–æ¨¡å—ä¿¡æ¯ã€‚ç¡®å®šç‰ˆæœ¬ï¼Œå› ä¸º package.json ä¸­å¾€å¾€æ˜¯ semantic versionï¼ˆsemverï¼Œè¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼‰ã€‚æ­¤æ—¶å¦‚æœç‰ˆæœ¬æè¿°æ–‡ä»¶ï¼ˆnpm-shrinkwrap.json æˆ– package-lock.jsonï¼‰ä¸­æœ‰è¯¥æ¨¡å—ä¿¡æ¯ï¼Œåˆ™å·²ä¹‹ä¸ºå‡†ï¼Œå¦‚æœæ²¡æœ‰åˆ™ä»ä»“åº“è·å–ã€‚å¦‚ packaeg.json ä¸­æŸä¸ªåŒ…çš„ç‰ˆæœ¬æ˜¯ ^1.1.0ï¼Œåˆ™ä¼šè·å–ç¬¦åˆ 1.x.x å½¢å¼çš„æœ€æ–°ç‰ˆ</li><li>è·å–æ¨¡å—å®ä½“ã€‚ä¸Šä¸€æ­¥è·å–äº†å‹ç¼©åŒ…åœ°å€ï¼ˆresolved å­—æ®µï¼‰ï¼Œnpm ä¼šä»¥æ­¤åœ°å€æ£€æŸ¥æœ¬åœ°ç¼“å­˜ï¼Œè‹¥æœ‰å°±ç›´æ¥æ‹·è´ï¼Œæ²¡æœ‰åˆ™ä»ä»“åº“ä¸‹è½½</li><li>æŸ¥æ‰¾æ¨¡å—ä¾èµ–ï¼Œè‹¥æœ‰ä¾èµ–åˆ™è¿”å›ç¬¬ 1 æ­¥ï¼Œè‹¥æ²¡æœ‰åˆ™åœæ­¢ã€‚</li></ul><p><strong>æ¨¡å—æ‰å¹³ï¼ˆdedupeï¼‰</strong></p><p>ä¸Šä¸€æ­¥è·å–åˆ°çš„ä¾èµ–æ ‘ï¼Œéœ€è¦æ¸…é™¤é‡å¤æ¨¡å—ã€‚æ¯”å¦‚ A æ¨¡å—ä¾èµ–äº <code>moment</code>ï¼ŒB æ¨¡å—ä¹Ÿä¾èµ– <code>moment</code>ã€‚åœ¨ <code>npm3</code> ä»¥å‰ä¼šä¸¥æ ¼æŒ‰ç…§ä¾èµ–æ ‘çš„ç»“æ„è¿›è¡Œå®‰è£…ï¼Œä¼šé€ æˆæ¨¡å—å†—ä½™ã€‚</p><p>ä» <code>npm3</code> å¼€å§‹é»˜è®¤åŠ å…¥äº†ä¸€ä¸ª dedupe çš„è¿‡ç¨‹ã€‚å®ƒä¼šéå†æ‰€æœ‰èŠ‚ç‚¹ï¼Œé€ä¸ªå°†æ¨¡å—æ”¾åœ¨æ ¹èŠ‚ç‚¹ä¸‹é¢ï¼Œä¹Ÿå°±æ˜¯ node-modules çš„ç¬¬ä¸€å±‚ã€‚å½“å‘ç°æœ‰<strong>é‡å¤æ¨¡å—</strong>æ—¶ï¼Œåˆ™å°†å…¶ä¸¢å¼ƒã€‚</p><p>è¿™é‡Œéœ€è¦å¯¹<strong>é‡å¤æ¨¡å—</strong>è¿›è¡Œä¸€ä¸ªå®šä¹‰ï¼Œå®ƒæŒ‡çš„æ˜¯<strong>æ¨¡å—åç›¸åŒ</strong>ä¸” <strong>semver å…¼å®¹ã€‚<strong>æ¯ä¸ª semver éƒ½å¯¹åº”ä¸€æ®µç‰ˆæœ¬å…è®¸èŒƒå›´ï¼Œå¦‚æœä¸¤ä¸ªæ¨¡å—çš„ç‰ˆæœ¬å…è®¸èŒƒå›´å­˜åœ¨äº¤é›†ï¼Œé‚£ä¹ˆå°±å¯ä»¥å¾—åˆ°ä¸€ä¸ª</strong>å…¼å®¹</strong>ç‰ˆæœ¬ï¼Œè€Œä¸å¿…ç‰ˆæœ¬å·å®Œå…¨ä¸€è‡´ï¼Œè¿™å¯ä»¥ä½¿æ›´å¤šå†—ä½™æ¨¡å—åœ¨ dedupe è¿‡ç¨‹ä¸­è¢«å»æ‰ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå‡è®¾ä¸€ä¸ªä¾èµ–æ ‘åŸæœ¬æ˜¯è¿™æ ·ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">node_modules</span></div><div class="token-line"><span class="token plain">-- foo</span></div><div class="token-line"><span class="token plain">---- lodash@version1</span></div></pre></div><p>-- bar ---- lodash@version2</p><p>å‡è®¾ version1 å’Œ version2 æ˜¯å…¼å®¹ç‰ˆæœ¬ï¼Œåˆ™ç»è¿‡ dedupe ä¼šæˆä¸ºä¸‹é¢çš„å½¢å¼ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">node_modules</span></div><div class="token-line"><span class="token plain">-- foo</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">-- bar</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">-- lodashï¼ˆä¿ç•™çš„ç‰ˆæœ¬ä¸ºå…¼å®¹ç‰ˆæœ¬ï¼‰</span></div></pre></div><p>å‡è®¾ version1 å’Œ version2 ä¸ºéå…¼å®¹ç‰ˆæœ¬ï¼Œåˆ™åé¢çš„ç‰ˆæœ¬ä¿ç•™åœ¨ä¾èµ–æ ‘ä¸­ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-unknown"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">node_modules</span></div><div class="token-line"><span class="token plain">-- foo</span></div><div class="token-line"><span class="token plain">-- lodash@version1</span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">-- bar</span></div><div class="token-line"><span class="token plain">---- lodash@version2</span></div></pre></div><p><strong>å®‰è£…æ¨¡å—</strong></p><p>æ›´æ–°å·¥ç¨‹ä¸­çš„ <code>node_modules</code>ï¼Œå¹¶æ‰§è¡Œæ¨¡å—ä¸­çš„ç”Ÿå‘½å‘¨æœŸå‡½æ•°ï¼ˆ<code>preinstall</code>ã€<code>install</code>ã€<code>postinstall</code> ï¼‰ã€‚</p><p><strong>æ‰§è¡Œå·¥ç¨‹è‡ªèº«ç”Ÿå‘½å‘¨æœŸ</strong></p><p>å½“å‰ npm å·¥ç¨‹å¦‚æœå®šä¹‰äº†é’©å­æ­¤æ—¶ä¼šè¢«æ‰§è¡Œï¼ˆæŒ‰ç…§ <code>install</code>ã€<code>postinstall</code>ã€<code>prepublish</code>ã€<code>prepare</code> çš„é¡ºåºï¼‰ã€‚</p><p>ç”Ÿæˆæˆ–æ›´æ–°ç‰ˆæœ¬æè¿°æ–‡ä»¶ï¼Œ<code>npm install</code> è¿‡ç¨‹å®Œæˆã€‚</p><h2 id="web-worker-æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨"><a aria-hidden="true" tabindex="-1" href="/basic/day#web-worker-æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨"><span class="icon icon-link"></span></a>Web Worker æ˜¯ä»€ä¹ˆï¼Œå¦‚ä½•ä½¿ç”¨</h2><h3 id="æ˜¯ä»€ä¹ˆ"><a aria-hidden="true" tabindex="-1" href="/basic/day#æ˜¯ä»€ä¹ˆ"><span class="icon icon-link"></span></a>æ˜¯ä»€ä¹ˆ</h3><p>JavaScript è¯­è¨€é‡‡ç”¨çš„æ˜¯å•çº¿ç¨‹æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ‰€æœ‰ä»»åŠ¡åªèƒ½åœ¨ä¸€ä¸ªçº¿ç¨‹ä¸Šå®Œæˆï¼Œä¸€æ¬¡åªèƒ½åšä¸€ä»¶äº‹ã€‚Web Worker çš„ä½œç”¨ï¼Œå°±æ˜¯ä¸º JavaScript åˆ›é€ å¤šçº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸ä¸»çº¿ç¨‹åˆ›å»º Worker çº¿ç¨‹ï¼Œå°†ä¸€äº›ä»»åŠ¡åˆ†é…ç»™åè€…è¿è¡Œã€‚</p><h4 id="åœ¨ä¸»å…¥å£æˆ–ç»„ä»¶æ–‡ä»¶"><a aria-hidden="true" tabindex="-1" href="/basic/day#åœ¨ä¸»å…¥å£æˆ–ç»„ä»¶æ–‡ä»¶"><span class="icon icon-link"></span></a>åœ¨ä¸»å…¥å£æˆ–ç»„ä»¶æ–‡ä»¶</h4><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> worker </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Worker</span><span class="token punctuation">(</span><span class="token string">&#x27;work.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>å‘ Web Worker å‘é€è®¡ç®—è¯·æ±‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;calculate&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> method</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;echo&#x27;</span><span class="token punctuation">,</span><span class="token plain"> args</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;Work&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>æ­¤æ—¶æˆ‘ä»¬éœ€è¦ç›‘å¬ Web Worker å‘é€å›æ¥çš„æ¶ˆæ¯</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">onmessage</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Received&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> event</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// doSomething...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>å®Œæˆä»¥åï¼Œå…³é—­</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">terminate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h4 id="åœ¨-work-çº¿ç¨‹ï¼ˆworkjsï¼‰"><a aria-hidden="true" tabindex="-1" href="/basic/day#åœ¨-work-çº¿ç¨‹ï¼ˆworkjsï¼‰"><span class="icon icon-link"></span></a>åœ¨ work çº¿ç¨‹ï¼ˆwork.jsï¼‰</h4><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">self</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    self</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// æˆ–è€…</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    self</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// æˆ–è€…</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token string">&#x27;message&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    self</span><span class="token punctuation">.</span><span class="token method function property-access">postMessage</span><span class="token punctuation">(</span><span class="token string">&#x27;You said: &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> e</span><span class="token punctuation">.</span><span class="token property-access">data</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token boolean">false</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">self</span><span class="token punctuation">.</span><span class="token method function property-access">close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>åŠ è½½å…¶ä»–è„šæœ¬</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">importScripts</span><span class="token punctuation">(</span><span class="token string">&#x27;script1.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>å…³äºé”™è¯¯çš„å¤„ç†</p><div class="__dumi-default-code-block"><pre class="prism-code language-javascript"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">worker</span><span class="token punctuation">.</span><span class="token method function property-access">addEventListener</span><span class="token punctuation">(</span><span class="token string">&#x27;error&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="è¯·æ‰‹å†™-bind-ã€apply"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯·æ‰‹å†™-bind-ã€apply"><span class="icon icon-link"></span></a>è¯·æ‰‹å†™ <code>bind</code> ã€<code>apply</code></h2><p>å®ç° bindï¼Œè¦æ³¨æ„å‡ ä¸ªç‚¹</p><ol><li>ç”Ÿæˆæ–°å‡½æ•°çš„ prototype åº”è¯¥æ˜¯æŒ‡å‘å½“å‰ä½œç”¨åŸŸçš„åŸå‹</li><li>è¿˜è¦ä¿è¯æ–°åˆ›å»ºçš„å‡½æ•°åŸå‹åŠå‡½æ•°å¯¹è±¡çš„ç§æœ‰åŸå‹æ­£ç¡®</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">bind2</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">typeof</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token plain"> </span><span class="token operator">!==</span><span class="token plain"> </span><span class="token string">&#x27;function&#x27;</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">throw</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&#x27;Function.prototype.bind - what is trying to be bound is not callable&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> self </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> args </span><span class="token operator">=</span><span class="token plain"> </span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">arguments</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">fNOP</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">fbound</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    self</span><span class="token punctuation">.</span><span class="token method function property-access">apply</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">this</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">self</span><span class="token plain"> </span><span class="token operator">?</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token plain"> </span><span class="token operator">:</span><span class="token plain"> context</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">.</span><span class="token method function property-access">concat</span><span class="token punctuation">(</span><span class="token class-name">Array</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">slice</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">arguments</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  fNOP</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  fbound</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">fNOP</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> fbound</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>å®ç° applyï¼Œä¸å€ŸåŠ© bind æˆ– call å®ç°</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Function</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">apply2</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token parameter punctuation">,</span><span class="token parameter"> arr</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> context </span><span class="token operator">=</span><span class="token plain"> </span><span class="token known-class-name class-name">Object</span><span class="token punctuation">(</span><span class="token plain">context</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  context</span><span class="token punctuation">.</span><span class="token property-access">fn</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">this</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token plain">arr</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result </span><span class="token operator">=</span><span class="token plain"> context</span><span class="token punctuation">.</span><span class="token method function property-access">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">var</span><span class="token plain"> args </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> i </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">,</span><span class="token plain"> len </span><span class="token operator">=</span><span class="token plain"> arr</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"> i </span><span class="token operator">&lt;</span><span class="token plain"> len</span><span class="token punctuation">;</span><span class="token plain"> i</span><span class="token operator">++</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      args</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token string">&#x27;arr[&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> i </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;]&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    result </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&#x27;context.fn(&#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> args </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;)&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">delete</span><span class="token plain"> context</span><span class="token punctuation">.</span><span class="token property-access">fn</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> result</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><h2 id="è¯·æ‰‹å†™ä¸€ä¸ª-webpack-æ’ä»¶ï¼ˆpluginï¼‰"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯·æ‰‹å†™ä¸€ä¸ª-webpack-æ’ä»¶ï¼ˆpluginï¼‰"><span class="icon icon-link"></span></a>è¯·æ‰‹å†™ä¸€ä¸ª webpack æ’ä»¶ï¼ˆpluginï¼‰</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// A JavaScript class.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">MyExampleWebpackPlugin</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// Define `apply` as its prototype method which is supplied with compiler as its argument</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// Specify the event hook to attach to</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">emit</span><span class="token punctuation">.</span><span class="token method function property-access">tapAsync</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token string">&#x27;MyExampleWebpackPlugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token parameter punctuation">,</span><span class="token parameter"> callback</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;This is an example plugin!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token string">&#x27;Hereâ€™s the `compilation` object which represents a single build of assets:&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          compilation</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token comment">// Manipulate the build using the plugin API provided by webpack</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        compilation</span><span class="token punctuation">.</span><span class="token method function property-access">addModule</span><span class="token punctuation">(</span><span class="token comment">/* ... */</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">        </span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>æˆ–è€…åƒè¿™ç§åŸºç¡€ä½¿ç”¨</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">HelloWorldPlugin</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">done</span><span class="token punctuation">.</span><span class="token method function property-access">tap</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello World Plugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      stats </span><span class="token comment">/* stats is passed as an argument when done hook is tapped.  */</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token string">&#x27;Hello World!&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">HelloWorldPlugin</span><span class="token punctuation">;</span></div></pre></div><p>ä½¿ç”¨æ’ä»¶</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// webpack.config.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> </span><span class="token maybe-class-name">HelloWorldPlugin</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;hello-world&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">// ... configuration settings here ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  plugins</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">HelloWorldPlugin</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> options</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>ä¸€ä¸ªç¤ºä¾‹</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">class</span><span class="token plain"> </span><span class="token class-name">FileListPlugin</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">compiler</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// emit is asynchronous hook, tapping into it using tapAsync, you can use tapPromise/tap(synchronous) as well</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    compiler</span><span class="token punctuation">.</span><span class="token property-access">hooks</span><span class="token punctuation">.</span><span class="token property-access">emit</span><span class="token punctuation">.</span><span class="token method function property-access">tapAsync</span><span class="token punctuation">(</span><span class="token string">&#x27;FileListPlugin&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token parameter">compilation</span><span class="token parameter punctuation">,</span><span class="token parameter"> callback</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// Create a header string for the generated file:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword">var</span><span class="token plain"> filelist </span><span class="token operator">=</span><span class="token plain"> </span><span class="token string">&#x27;In this build:\n\n&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// Loop through all compiled assets,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// adding a new line item for each filename.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token keyword control-flow">for</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">var</span><span class="token plain"> filename </span><span class="token keyword">in</span><span class="token plain"> compilation</span><span class="token punctuation">.</span><span class="token property-access">assets</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        filelist </span><span class="token operator">+=</span><span class="token plain"> </span><span class="token string">&#x27;- &#x27;</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> filename </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;\n&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">      </span><span class="token comment">// Insert this list into the webpack build as a new file asset:</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      compilation</span><span class="token punctuation">.</span><span class="token property-access">assets</span><span class="token punctuation">[</span><span class="token string">&#x27;filelist.md&#x27;</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function-variable function">source</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword control-flow">return</span><span class="token plain"> filelist</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token function-variable function">size</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token keyword control-flow">return</span><span class="token plain"> filelist</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">      </span><span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token maybe-class-name">FileListPlugin</span><span class="token punctuation">;</span></div></pre></div><h2 id="è¯·æ‰‹å†™ä¸€ä¸ª-webpack-loader"><a aria-hidden="true" tabindex="-1" href="/basic/day#è¯·æ‰‹å†™ä¸€ä¸ª-webpack-loader"><span class="icon icon-link"></span></a>è¯·æ‰‹å†™ä¸€ä¸ª webpack loader</h2><p>Loader æ˜¯ webpack ç”¨äºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­è§£æå„ç±»æ–‡ä»¶æ ¼å¼å¹¶è¾“å‡ºï¼Œæœ¬è´¨æ˜¯ä¸€ä¸ª node æ¨¡å—ã€‚</p><p>æˆ‘ä»¬è‡ªå®šä¹‰ä¸€ä¸ª Loaderï¼Œåšå¦‚ä¸‹æè¿°çš„äº‹æƒ…ï¼š</p><ol><li>è¯»å– txt æ–‡ä»¶å†…å®¹ï¼Œå¹¶è¾“å‡ºä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œå†…å®¹åŒ…æ‹¬æ–‡ä»¶å†…å®¹å’Œæ–‡ä»¶å</li><li>è¯»å– loader é€‰é¡¹ï¼Œå°†å†…å®¹ä¸­çš„[name]æ›¿æ¢ä¸ºé…ç½®å€¼</li></ol><p>åœ¨ webpack é…ç½®æ–‡ä»¶ä¸­çš„é…ç½®</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// webpack.config.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token comment">//...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  module</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    rules</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        test</span><span class="token operator">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\.txt$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        use</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          loader</span><span class="token operator">:</span><span class="token plain"> path</span><span class="token punctuation">.</span><span class="token method function property-access">resolve</span><span class="token punctuation">(</span><span class="token plain">__dirname</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;./txt-loader.js&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          options</span><span class="token operator">:</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">            name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;YOLO&#x27;</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">          </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">        </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">      </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>åœ¨ txt-loader.js ä¸­å®šä¹‰ loader ç›¸å…³å†…å®¹</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token comment">// txt-loader.js</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> utils </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;loader-utils&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">module</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">exports</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">source</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> options </span><span class="token operator">=</span><span class="token plain"> utils</span><span class="token punctuation">.</span><span class="token method function property-access">getOptions</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  source </span><span class="token operator">=</span><span class="token plain"> source</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex">\[name\]</span><span class="token regex regex-delimiter">/</span><span class="token regex regex-flags">g</span><span class="token punctuation">,</span><span class="token plain"> options</span><span class="token punctuation">.</span><span class="token property-access">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">export default </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation constant">JSON</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation function">stringify</span><span class="token template-string interpolation punctuation">(</span><span class="token template-string interpolation punctuation">{</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">    content</span><span class="token template-string interpolation operator">:</span><span class="token template-string interpolation"> source</span><span class="token template-string interpolation punctuation">,</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">    filename</span><span class="token template-string interpolation operator">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation keyword">this</span><span class="token template-string interpolation punctuation">.</span><span class="token template-string interpolation">resourcePath</span><span class="token template-string interpolation punctuation">,</span><span class="token template-string interpolation"></span></div><div class="token-line"><span class="token template-string interpolation">  </span><span class="token template-string interpolation punctuation">}</span><span class="token template-string interpolation punctuation">)</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span></div></pre></div><p>æ‰“åŒ…å®Œæ¯•å°±èƒ½çœ‹åˆ°ç”Ÿæˆçš„ txt æ–‡ä»¶ä¸­å†…å®¹å·²ç»è¢«æ›´æ”¹ã€‚</p><h2 id="åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•-objectprototypetostringcall-ã€-instanceof-ä»¥åŠ-arrayisarrayï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£"><a aria-hidden="true" tabindex="-1" href="/basic/day#åˆ¤æ–­æ•°ç»„çš„æ–¹æ³•-objectprototypetostringcall-ã€-instanceof-ä»¥åŠ-arrayisarrayï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£"><span class="icon icon-link"></span></a>åˆ¤æ–­æ•°ç»„çš„æ–¹æ³• Object.prototype.toString.call() ã€ instanceof ä»¥åŠ Array.isArray()ï¼Œåˆ†åˆ«ä»‹ç»ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«å’Œä¼˜åŠ£</h2><p><strong>Object.prototype.toString.call()</strong></p><p>æ¯ä¸€ä¸ªç»§æ‰¿ Object çš„å¯¹è±¡éƒ½æœ‰ <code>toString</code> æ–¹æ³•ï¼Œå¦‚æœ <code>toString</code> æ–¹æ³•æ²¡æœ‰é‡å†™çš„è¯ï¼Œä¼šè¿”å› <code>[Object type]</code>ï¼Œå…¶ä¸­ type ä¸ºå¯¹è±¡çš„ç±»å‹ã€‚ä½†å½“é™¤äº† Object ç±»å‹çš„å¯¹è±¡å¤–ï¼Œå…¶ä»–ç±»å‹ç›´æ¥ä½¿ç”¨ <code>toString</code> æ–¹æ³•æ—¶ï¼Œä¼šç›´æ¥è¿”å›éƒ½æ˜¯å†…å®¹çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ä½¿ç”¨ call æˆ–è€… apply æ–¹æ³•æ¥æ”¹å˜ toString æ–¹æ³•çš„æ‰§è¡Œä¸Šä¸‹æ–‡ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> an </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token string">&#x27;Hello&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;An&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">an</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;Hello,An&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">an</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Array]&quot;</span></div></pre></div><p>è¿™ç§æ–¹æ³•å¯¹äºæ‰€æœ‰åŸºæœ¬çš„æ•°æ®ç±»å‹éƒ½èƒ½è¿›è¡Œåˆ¤æ–­ï¼Œå³ä½¿æ˜¯ null å’Œ undefined ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token string">&#x27;An&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object String]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Number]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token known-class-name class-name">Symbol</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Symbol]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword null nil">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Null]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword nil">undefined</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Undefined]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Function]&quot;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;An&#x27;</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// &quot;[object Object]&quot;</span></div></pre></div><p><code>Object.prototype.toString.call()</code> å¸¸ç”¨äºåˆ¤æ–­æµè§ˆå™¨å†…ç½®å¯¹è±¡</p><p><strong>instanceof</strong></p><p><code>instanceof</code> çš„å†…éƒ¨æœºåˆ¶æ˜¯é€šè¿‡åˆ¤æ–­å¯¹è±¡çš„åŸå‹é“¾ä¸­æ˜¯ä¸æ˜¯èƒ½æ‰¾åˆ°ç±»å‹çš„ <code>prototype</code>ã€‚</p><p>ä½¿ç”¨ <code>instanceof</code>åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„ï¼Œ<code>instanceof</code> ä¼šåˆ¤æ–­è¿™ä¸ªå¯¹è±¡çš„åŸå‹é“¾ä¸Šæ˜¯å¦ä¼šæ‰¾åˆ°å¯¹åº”çš„ <code>Array</code> çš„åŸå‹ï¼Œæ‰¾åˆ°è¿”å› <code>true</code>ï¼Œå¦åˆ™è¿”å› <code>false</code>ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">Array</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span></div></pre></div><p>ä½† <code>instanceof</code> åªèƒ½ç”¨æ¥åˆ¤æ–­å¯¹è±¡ç±»å‹ï¼ŒåŸå§‹ç±»å‹ä¸å¯ä»¥ã€‚å¹¶ä¸”æ‰€æœ‰å¯¹è±¡ç±»å‹ instanceof Object éƒ½æ˜¯ trueã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token plain"> </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span></div></pre></div><p><strong>Array.isArray()</strong></p><ul><li><p>åŠŸèƒ½ï¼šç”¨æ¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦ä¸ºæ•°ç»„</p></li><li><p>instanceof ä¸ isArray</p><p>å½“æ£€æµ‹ Array å®ä¾‹æ—¶ï¼Œ<code>Array.isArray</code> ä¼˜äº <code>instanceof</code> ï¼Œå› ä¸º <code>Array.isArray</code> å¯ä»¥æ£€æµ‹å‡º <code>iframes</code></p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> iframe </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token method function property-access">createElement</span><span class="token punctuation">(</span><span class="token string">&#x27;iframe&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token dom variable">document</span><span class="token punctuation">.</span><span class="token property-access">body</span><span class="token punctuation">.</span><span class="token method function property-access">appendChild</span><span class="token punctuation">(</span><span class="token plain">iframe</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">xArray </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">frames</span><span class="token punctuation">[</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">frames</span><span class="token punctuation">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator">-</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">var</span><span class="token plain"> arr </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">xArray</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// [1,2,3]</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Correctly checking for Array</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method function property-access">isArray</span><span class="token punctuation">(</span><span class="token plain">arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// true</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// Considered harmful, because doesn&#x27;t work though iframes</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">arr </span><span class="token keyword">instanceof</span><span class="token plain"> </span><span class="token class-name">Array</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// false</span></div></pre></div></li><li><p><code>Array.isArray()</code> ä¸ <code>Object.prototype.toString.call()</code></p><p><code>Array.isArray()</code>æ˜¯ ES5 æ–°å¢çš„æ–¹æ³•ï¼Œå½“ä¸å­˜åœ¨ <code>Array.isArray()</code> ï¼Œå¯ä»¥ç”¨ <code>Object.prototype.toString.call()</code> å®ç°ã€‚</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token property-access">isArray</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token known-class-name class-name">Array</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">isArray</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token class-name">Object</span><span class="token punctuation">.</span><span class="token property-access">prototype</span><span class="token punctuation">.</span><span class="token method function property-access">toString</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token plain">arg</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token string">&#x27;[object Array]&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div></li></ul><h2 id="ä½¿ç”¨-this-çš„å…¸å‹ä¾‹å­"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä½¿ç”¨-this-çš„å…¸å‹ä¾‹å­"><span class="icon icon-link"></span></a>ä½¿ç”¨ this çš„å…¸å‹ä¾‹å­</h2><ol><li>Implicit binding:</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> b </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token function-variable function">a</span><span class="token operator">:</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">b</span><span class="token punctuation">.</span><span class="token method function property-access">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// this is b</span></div></pre></div><ol start="2"><li>Explicit binding:</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token plain">b</span><span class="token punctuation">.</span><span class="token method function property-access">a</span><span class="token punctuation">.</span><span class="token method function property-access">call</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// this is window</span></div></pre></div><ol start="3"><li>new binding</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token method-variable function-variable method function property-access">a</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">b</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">b</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">let</span><span class="token plain"> b </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">b</span><span class="token punctuation">.</span><span class="token method function property-access">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token comment">// this is b object;</span></div></pre></div><ol start="4"><li>window binding</li></ol><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">var</span><span class="token plain"> a </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">1</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token property-access">a</span><span class="token punctuation">;</span></div></pre></div><h2 id="å¯¹a--123--false--trueå†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•"><a aria-hidden="true" tabindex="-1" href="/basic/day#å¯¹a--123--false--trueå†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•"><span class="icon icon-link"></span></a>å¯¹<code>a == (&#x27;1&#x27;||&#x27;2&#x27;||&#x27;3&#x27;) ? false : true</code>å†™æ³•è¿›è¡Œæ”¹è¿›ï¼Œå†™å‡ºä½ ä¼˜åŒ–åçš„æ–¹æ³•</h2><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">!</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token operator">+</span><span class="token plain">a</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>æˆ–è€…</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">!</span><span class="token punctuation">[</span><span class="token string">&#x27;1&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;2&#x27;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token string">&#x27;3&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token method function property-access">includes</span><span class="token punctuation">(</span><span class="token plain">a </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><p>æˆ–è€…</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token operator">!</span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token number">1</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">2</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token number">3</span><span class="token operator">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">[</span><span class="token plain">a</span><span class="token punctuation">]</span><span class="token punctuation">;</span></div></pre></div><h2 id="abcd-å’Œ-abcdï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#abcd-å’Œ-abcdï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ"><span class="icon icon-link"></span></a>a.b.c.d å’Œ a[&#x27;b&#x27;][&#x27;c&#x27;][&#x27;d&#x27;]ï¼Œå“ªä¸ªæ€§èƒ½æ›´é«˜ï¼Ÿ</h2><p><code>a.b.c.d</code> æ¯” <code>a[&#x27;b&#x27;][&#x27;c&#x27;][&#x27;d&#x27;]</code> æ€§èƒ½é«˜ç‚¹ï¼Œåè€…è¿˜è¦è€ƒè™‘ <code>[ ]</code> ä¸­æ˜¯å˜é‡çš„æƒ…å†µ</p><p>å†è€…ï¼Œä»ä¸¤ç§å½¢å¼çš„ç»“æ„æ¥çœ‹ï¼Œæ˜¾ç„¶ç¼–è¯‘å™¨è§£æå‰è€…è¦æ¯”åè€…å®¹æ˜“äº›ï¼Œè‡ªç„¶ä¹Ÿå°±å¿«ä¸€ç‚¹ã€‚</p><p>æ€»ä¹‹ï¼Œåœ¨é¡¹ç›®ä¸­ï¼Œå°½é‡å°†å¯¹è±¡ä¸­çš„å±æ€§ç»“æ„ä½¿ç”¨ï¼Œ ç¤ºä¾‹</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword">const</span><span class="token plain"> obj </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string">&#x27;walker&#x27;</span><span class="token punctuation">,</span><span class="token plain"> age</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">10</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> name</span><span class="token punctuation">,</span><span class="token plain"> age </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> obj</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">name</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">age</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><h2 id="å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾"><a aria-hidden="true" tabindex="-1" href="/basic/day#å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾"><span class="icon icon-link"></span></a>å¦‚ä½•å®ç°æ— ç¼è½®æ’­å›¾</h2><p>æ— ç¼è½®æ’­çš„æ ¸å¿ƒæ˜¯åˆ¶é€ ä¸€ä¸ªè¿ç»­çš„æ•ˆæœã€‚æœ€ç®€å•çš„æ–¹æ³•å°±æ˜¯å¤åˆ¶ä¸€ä¸ªè½®æ’­çš„å…ƒç´ ï¼Œå½“å¤åˆ¶å…ƒç´ å°†è¦æ»šåˆ°ç›®æ ‡ä½ç½®åï¼ŒæŠŠåŸæ¥çš„å…ƒç´ è¿›è¡Œå½’ä½çš„æ“ä½œï¼Œä»¥è¾¾åˆ°æ— ç¼çš„è½®æ’­æ•ˆæœã€‚</p><p>ä½¿ç”¨ <code>React</code> ç»“åˆ <code>Hooks</code> å®ç°æ ¸å¿ƒä»£ç ç‰‡æ®µå¦‚ä¸‹ï¼š</p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token function">useEffect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> requestAnimationFrame </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">requestAnimationFrame</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">webkitRequestAnimationFrame</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">mozRequestAnimationFrame</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> cancelAnimationFrame </span><span class="token operator">=</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">cancelAnimationFrame</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">webkitCancelAnimationFrame</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">mozCancelAnimationFrame</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> scrollNode </span><span class="token operator">=</span><span class="token plain"> noticeContentEl</span><span class="token punctuation">.</span><span class="token property-access">current</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> distance </span><span class="token operator">=</span><span class="token plain"> scrollNode</span><span class="token punctuation">.</span><span class="token property-access">clientWidth</span><span class="token plain"> </span><span class="token operator">/</span><span class="token plain"> </span><span class="token number">2</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  scrollNode</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> scrollNode</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">||</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">let</span><span class="token plain"> requestId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword null nil">null</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token function-variable function">scrollLeft</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> speed </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0.5</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> speed</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    scrollNode</span><span class="token punctuation">.</span><span class="token property-access">style</span><span class="token punctuation">.</span><span class="token property-access">left</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token operator">-</span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">+</span><span class="token plain"> </span><span class="token string">&#x27;px&#x27;</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// å…³é”®è¡Œï¼šå½“è·ç¦»å°äºåç§»é‡æ—¶ï¼Œé‡ç½®åç§»é‡</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">distance </span><span class="token operator">&lt;=</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token dom variable">window</span><span class="token punctuation">.</span><span class="token property-access">__offset</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    requestId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token plain">scrollLeft</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  requestId </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token plain">scrollLeft</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">pause</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token plain">requestId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">return</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token function">cancelAnimationFrame</span><span class="token punctuation">(</span><span class="token plain">requestId</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">[</span><span class="token plain">notice</span><span class="token punctuation">,</span><span class="token plain"> pause</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></div></pre></div><h2 id="react-router-é‡Œçš„-link-æ ‡ç­¾å’Œ-a-æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«"><a aria-hidden="true" tabindex="-1" href="/basic/day#react-router-é‡Œçš„-link-æ ‡ç­¾å’Œ-a-æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«"><span class="icon icon-link"></span></a>react-router é‡Œçš„ Link æ ‡ç­¾å’Œ a æ ‡ç­¾æœ‰ä»€ä¹ˆåŒºåˆ«</h2><p>Link ç‚¹å‡»äº‹ä»¶ handleClick éƒ¨åˆ†æºç </p><div class="__dumi-default-code-block"><pre class="prism-code language-js"><button class="__dumi-default-icon __dumi-default-code-block-copy-btn" data-status="ready"></button><div class="token-line"><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">_this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">onClick</span><span class="token punctuation">)</span><span class="token plain"> _this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token method function property-access">onClick</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">!</span><span class="token plain">event</span><span class="token punctuation">.</span><span class="token property-access">defaultPrevented</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token comment">// onClick prevented default</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  event</span><span class="token punctuation">.</span><span class="token property-access">button</span><span class="token plain"> </span><span class="token operator">===</span><span class="token plain"> </span><span class="token number">0</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token comment">// ignore everything but left clicks</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">!</span><span class="token plain">_this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">.</span><span class="token property-access">target</span><span class="token plain"> </span><span class="token operator">&amp;&amp;</span><span class="token plain"> </span><span class="token comment">// let browser handle &quot;target=_blank&quot; etc.</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token operator">!</span><span class="token function">isModifiedEvent</span><span class="token punctuation">(</span><span class="token plain">event</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token comment">// ignore clicks with modifier keys</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  event</span><span class="token punctuation">.</span><span class="token method function property-access">preventDefault</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> history </span><span class="token operator">=</span><span class="token plain"> _this</span><span class="token punctuation">.</span><span class="token property-access">context</span><span class="token punctuation">.</span><span class="token property-access">router</span><span class="token punctuation">.</span><span class="token property-access">history</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">var</span><span class="token plain"> _this$props </span><span class="token operator">=</span><span class="token plain"> _this</span><span class="token punctuation">.</span><span class="token property-access">props</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    replace </span><span class="token operator">=</span><span class="token plain"> _this$props</span><span class="token punctuation">.</span><span class="token property-access">replace</span><span class="token punctuation">,</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    to </span><span class="token operator">=</span><span class="token plain"> _this$props</span><span class="token punctuation">.</span><span class="token property-access">to</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword control-flow">if</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token plain">replace</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    history</span><span class="token punctuation">.</span><span class="token method function property-access">replace</span><span class="token punctuation">(</span><span class="token plain">to</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token keyword control-flow">else</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    history</span><span class="token punctuation">.</span><span class="token method function property-access">push</span><span class="token punctuation">(</span><span class="token plain">to</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><p>Link åšäº† 3 ä»¶äº‹æƒ…ï¼š</p><ol><li>æœ‰ onclick é‚£å°±æ‰§è¡Œ onclick</li><li>click çš„æ—¶å€™é˜»æ­¢ a æ ‡ç­¾é»˜è®¤äº‹ä»¶ï¼ˆè¿™æ ·å­ç‚¹å‡»<code>[123]()</code>å°±ä¸ä¼šè·³è½¬å’Œåˆ·æ–°é¡µé¢ï¼‰</li><li>å†å–å¾—è·³è½¬ hrefï¼ˆå³æ˜¯ toï¼‰ï¼Œç”¨ historyï¼ˆå‰ç«¯è·¯ç”±ä¸¤ç§æ–¹å¼ä¹‹ä¸€ï¼Œhistory &amp; hashï¼‰è·³è½¬ï¼Œæ­¤æ—¶åªæ˜¯é“¾æ¥å˜äº†ï¼Œå¹¶æ²¡æœ‰åˆ·æ–°é¡µé¢</li></ol><h2 id="ä¸ºä»€ä¹ˆè¦ç”¨-redux-sagaï¼Ÿçœ‹è¿‡-dva-æºç å—ï¼Ÿ"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä¸ºä»€ä¹ˆè¦ç”¨-redux-sagaï¼Ÿçœ‹è¿‡-dva-æºç å—ï¼Ÿ"><span class="icon icon-link"></span></a>ä¸ºä»€ä¹ˆè¦ç”¨ redux-sagaï¼Ÿçœ‹è¿‡ dva æºç å—ï¼Ÿ</h2><h3 id="redux"><a aria-hidden="true" tabindex="-1" href="/basic/day#redux"><span class="icon icon-link"></span></a>redux</h3><p>redux æ˜¯ JavaScript <code>çŠ¶æ€å®¹å™¨</code>ï¼Œæä¾›å¯<code>é¢„æµ‹åŒ–</code>çš„çŠ¶æ€ç®¡ç†ã€‚</p><p>åº”ç”¨ä¸­æ‰€æœ‰çš„ state éƒ½ä»¥ä¸€ä¸ªå¯¹è±¡æ ‘çš„å½¢å¼å‚¨å­˜åœ¨ä¸€ä¸ªå•ä¸€çš„ store ä¸­ã€‚ æƒŸä¸€æ”¹å˜ state çš„åŠæ³•æ˜¯è§¦å‘ actionï¼Œä¸€ä¸ªæè¿°å‘ç”Ÿä»€ä¹ˆçš„å¯¹è±¡ã€‚ ä¸ºäº†æè¿° action å¦‚ä½•æ”¹å˜ state æ ‘ï¼Œä½ éœ€è¦ç¼–å†™ reducersã€‚</p><p>ä½ åº”è¯¥æŠŠè¦åšçš„ä¿®æ”¹å˜æˆä¸€ä¸ªæ™®é€šå¯¹è±¡ï¼Œè¿™ä¸ªå¯¹è±¡è¢«å«åš actionï¼Œè€Œä¸æ˜¯ç›´æ¥ä¿®æ”¹ stateã€‚ç„¶åç¼–å†™ä¸“é—¨çš„å‡½æ•°æ¥å†³å®šæ¯ä¸ª action å¦‚ä½•æ”¹å˜åº”ç”¨çš„ stateï¼Œè¿™ä¸ªå‡½æ•°è¢«å«åš reducerã€‚</p><p>redux <code>æœ‰ä¸”ä»…æœ‰</code>ä¸€ä¸ª store å’Œä¸€ä¸ªæ ¹çº§çš„ reduce å‡½æ•°ï¼ˆreducerï¼‰ã€‚éšç€åº”ç”¨ä¸æ–­å˜å¤§ï¼Œä½ åº”è¯¥æŠŠæ ¹çº§çš„ reducer æ‹†æˆå¤šä¸ªå°çš„ reducersï¼Œåˆ†åˆ«ç‹¬ç«‹åœ°æ“ä½œ state æ ‘çš„ä¸åŒéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯æ·»åŠ æ–°çš„ storesã€‚è¿™å°±åƒä¸€ä¸ª React åº”ç”¨åªæœ‰ä¸€ä¸ªæ ¹çº§çš„ç»„ä»¶ï¼Œè¿™ä¸ªæ ¹ç»„ä»¶åˆç”±å¾ˆå¤šå°ç»„ä»¶æ„æˆã€‚</p><h3 id="redux-saga"><a aria-hidden="true" tabindex="-1" href="/basic/day#redux-saga"><span class="icon icon-link"></span></a>redux-saga</h3><p>redux-saga æ˜¯ä¸€ä¸ªç”¨äºç®¡ç†åº”ç”¨ç¨‹åº Side Effectï¼ˆ<code>å‰¯ä½œç”¨</code>ï¼Œä¾‹å¦‚å¼‚æ­¥è·å–æ•°æ®ï¼Œè®¿é—®æµè§ˆå™¨ç¼“å­˜ç­‰ï¼‰çš„ libraryï¼Œå®ƒçš„<code>ç›®æ ‡</code>æ˜¯<code>è®©å‰¯ä½œç”¨ç®¡ç†æ›´å®¹æ˜“ï¼Œæ‰§è¡Œæ›´é«˜æ•ˆï¼Œæµ‹è¯•æ›´ç®€å•ï¼Œåœ¨å¤„ç†æ•…éšœæ—¶æ›´å®¹æ˜“</code>ã€‚</p><p>å¯ä»¥æƒ³åƒä¸ºï¼Œä¸€ä¸ª saga å°±åƒæ˜¯åº”ç”¨ç¨‹åºä¸­ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ï¼Œå®ƒ<code>ç‹¬è‡ªè´Ÿè´£å¤„ç†å‰¯ä½œç”¨</code>ã€‚ redux-saga æ˜¯ä¸€ä¸ª <code>redux ä¸­é—´ä»¶</code>ï¼Œæ„å‘³ç€è¿™ä¸ªçº¿ç¨‹å¯ä»¥é€šè¿‡æ­£å¸¸çš„ redux action ä»ä¸»åº”ç”¨ç¨‹åºå¯åŠ¨ï¼Œæš‚åœå’Œå–æ¶ˆï¼Œå®ƒèƒ½è®¿é—®å®Œæ•´çš„ redux stateï¼Œä¹Ÿå¯ä»¥ dispatch redux actionã€‚</p><p>redux-saga ä½¿ç”¨äº† ES6 çš„ <code>Generator</code> åŠŸèƒ½ï¼Œè®©å¼‚æ­¥çš„æµç¨‹æ›´<code>æ˜“äºè¯»å–ï¼Œå†™å…¥å’Œæµ‹è¯•</code>ã€‚ï¼ˆå¦‚æœä½ è¿˜ä¸ç†Ÿæ‚‰çš„è¯ï¼Œè¿™é‡Œæœ‰ä¸€äº›ä»‹ç»æ€§çš„é“¾æ¥ï¼‰ é€šè¿‡è¿™æ ·çš„æ–¹å¼ï¼Œè¿™äº›å¼‚æ­¥çš„æµç¨‹çœ‹èµ·æ¥å°±åƒæ˜¯æ ‡å‡†åŒæ­¥çš„ Javascript ä»£ç ã€‚ï¼ˆæœ‰ç‚¹åƒ async/awaitï¼Œä½† Generator è¿˜æœ‰ä¸€äº›æ›´æ£’è€Œä¸”æˆ‘ä»¬ä¹Ÿéœ€è¦çš„åŠŸèƒ½ï¼‰ã€‚</p><p>ä½ å¯èƒ½å·²ç»ç”¨äº† redux-thunk æ¥å¤„ç†æ•°æ®çš„è¯»å–ã€‚ä¸åŒäº redux thunkï¼Œä½ ä¸ä¼šå†é‡åˆ°å›è°ƒåœ°ç‹±äº†ï¼Œä½ å¯ä»¥å¾ˆå®¹æ˜“åœ°æµ‹è¯•å¼‚æ­¥æµç¨‹å¹¶ä¿æŒä½ çš„ action æ˜¯å¹²å‡€çš„ã€‚</p><h3 id="redux-saga-ä¸å…¶ä»–-redux-ä¸­é—´ä»¶æ¯”è¾ƒ"><a aria-hidden="true" tabindex="-1" href="/basic/day#redux-saga-ä¸å…¶ä»–-redux-ä¸­é—´ä»¶æ¯”è¾ƒ"><span class="icon icon-link"></span></a>redux-saga ä¸å…¶ä»– redux ä¸­é—´ä»¶æ¯”è¾ƒ</h3><ul><li><p>redux-thunk çš„ç¼ºç‚¹åœ¨äº api å±‚ä¸ store è€¦åˆï¼Œä¼˜ç‚¹æ˜¯å¯ä»¥è·å–åˆ°å„ä¸ªå¼‚æ­¥æ“ä½œæ—¶æœŸçŠ¶æ€çš„å€¼ï¼Œæ¯”è¾ƒçµæ´»ï¼Œæ˜“äºæ§åˆ¶</p></li><li><p>redux-promise çš„ä¼˜ç‚¹æ˜¯ api å±‚ä¸ store è§£è€¦ï¼Œç¼ºç‚¹æ˜¯å¯¹è¯·æ±‚å¤±è´¥ï¼Œè¯·æ±‚ä¸­çš„æƒ…å½¢æ²¡æœ‰å¾ˆå¥½çš„å¤„ç†</p></li><li><p>redux-saga çš„ä¼˜ç‚¹æ˜¯ api å±‚ä¸ store è§£è€¦ï¼Œå¯¹è¯·æ±‚ä¸­ï¼Œè¯·æ±‚å¤±è´¥éƒ½æœ‰å®Œå–„çš„å¤„ç†ï¼Œç¼ºç‚¹æ˜¯ä»£ç é‡è¾ƒå¤§</p></li></ul><h2 id="ä»‹ç»ä¸‹-webpack-çƒ­æ›´æ–°åŸç†"><a aria-hidden="true" tabindex="-1" href="/basic/day#ä»‹ç»ä¸‹-webpack-çƒ­æ›´æ–°åŸç†"><span class="icon icon-link"></span></a>ä»‹ç»ä¸‹ webpack çƒ­æ›´æ–°åŸç†</h2><p>hot-module-replacement-plugin åŒ…ç»™ webpack-dev-server æä¾›äº†çƒ­æ›´æ–°çš„èƒ½åŠ›ï¼Œå®ƒä»¬ä¸¤è€…æ˜¯ç»“åˆä½¿ç”¨çš„ï¼Œå•ç‹¬å†™ä¸¤ä¸ªåŒ…ä¹Ÿæ˜¯å‡ºäºåŠŸèƒ½çš„è§£è€¦æ¥è€ƒè™‘çš„ã€‚</p><ol><li>webpack-dev-server(WDS)çš„åŠŸèƒ½æä¾› bundle server çš„èƒ½åŠ›ï¼Œå°±æ˜¯ç”Ÿæˆçš„ bundle.js æ–‡ä»¶å¯ä»¥é€šè¿‡ localhost://xxx çš„æ–¹å¼å»è®¿é—®ï¼Œå¦å¤– WDS ä¹Ÿæä¾› livereload(æµè§ˆå™¨çš„è‡ªåŠ¨åˆ·æ–°)ã€‚</li><li>hot-module-replacement-plugin çš„ä½œç”¨æ˜¯æä¾› HMR çš„ runtimeï¼Œå¹¶ä¸”å°† runtime æ³¨å…¥åˆ° bundle.js ä»£ç é‡Œé¢å»ã€‚ä¸€æ—¦ç£ç›˜é‡Œé¢çš„æ–‡ä»¶ä¿®æ”¹ï¼Œé‚£ä¹ˆ HMR server ä¼šå°†æœ‰ä¿®æ”¹çš„ js module ä¿¡æ¯å‘é€ç»™ HMR runtimeï¼Œç„¶å HMR runtime å»å±€éƒ¨æ›´æ–°é¡µé¢çš„ä»£ç ã€‚å› æ­¤è¿™ç§æ–¹å¼å¯ä»¥ä¸ç”¨åˆ·æ–°æµè§ˆå™¨ã€‚</li></ol></div><div class="__dumi-default-layout-footer-meta"><span data-updated-text="æœ€åæ›´æ–°æ—¶é—´ï¼š">7/3/2021 04:52:10</span></div></div></div></div>
	<script>
  window.g_useSSR = true;
  window.g_initialProps = {};
	</script>

    <script src="/enhanfe/umi.js"></script>
  </body>
</html>
